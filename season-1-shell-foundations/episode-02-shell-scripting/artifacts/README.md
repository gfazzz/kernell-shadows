# Episode 02: Artifacts โ ะขะตััะพะฒัะต ะดะฐะฝะฝัะต ะพั ะะผะธััะธั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ DMITRY ORLOV:                                                 โ
โ                                                               โ
โ "Max, ะฒะพั ัะตััะพะฒะพะต ะพะบััะถะตะฝะธะต. ะัั ััะพ ะฝัะถะฝะพ ะดะปั ัะฐะฑะพัั.     โ
โ  50 ัะตัะฒะตัะพะฒ. ะัะพะฒะตััะน ะดะพัััะฟะฝะพััั. ะะพะณะธััะน ัะตะทัะปััะฐัั.      โ
โ  Deadline โ 18:00. ะะพะบะฐะถะธ ะฝะฐ ััะพ ัะฟะพัะพะฑะตะฝ."                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ะคะฐะนะปั

### `servers.txt`
ะกะฟะธัะพะบ ัะตัะฒะตัะพะฒ ะพะฟะตัะฐัะธะธ KERNEL SHADOWS ะดะปั ะผะพะฝะธัะพัะธะฝะณะฐ.

**ะคะพัะผะฐั:**
```
SERVER_NAME IP_ADDRESS
```

**ะัะธะผะตั:**
```
shadow-server-01 185.192.45.118
shadow-server-02 185.192.45.119
test-server-01 8.8.8.8
```

**ะกัััะบัััะฐ ัะฐะนะปะฐ:**
- ะกััะพะบะธ ะฝะฐัะธะฝะฐััะธะตัั ั `#` โ ะบะพะผะผะตะฝัะฐัะธะธ (ะฟัะพะฟััะบะฐัััั)
- ะััััะต ัััะพะบะธ โ ะธะณะฝะพัะธัััััั
- ะะตัะฒะพะต ัะปะพะฒะพ โ ะธะผั ัะตัะฒะตัะฐ
- ะัะพัะพะต ัะปะพะฒะพ โ IP ะฐะดัะตั

---

## ๐ง ะะฐะบ ะธัะฟะพะปัะทะพะฒะฐัั

### ะะฐัะธะฐะฝั 1: ะะฐะฑะพัะฐ ะฒ ะดะธัะตะบัะพัะธะธ episode

```bash
cd ~/kernel-shadows/season-1-shell-foundations/episode-02-shell-scripting

# ะกะพะทะดะฐะน ัะฒะพะน ัะบัะธะฟั
nano server_monitor.sh

# ะกะบัะธะฟั ะฑัะดะตั ะธัะฟะพะปัะทะพะฒะฐัั artifacts/servers.txt
```

### ะะฐัะธะฐะฝั 2: ะะฐะฑะพัะฐ ะฒ artifacts/

```bash
cd ~/kernel-shadows/season-1-shell-foundations/episode-02-shell-scripting/artifacts

# ะกะพะทะดะฐะน ัะบัะธะฟั ะทะดะตัั
nano server_monitor.sh

# ะัะฟะพะปัะทัะน servers.txt ะฝะฐะฟััะผัั
```

### ะะฐัะธะฐะฝั 3: ะัะดะตะปัะฝะฐั ัะฐะฑะพัะฐั ะดะธัะตะบัะพัะธั

```bash
mkdir ~/server_monitoring
cd ~/server_monitoring

# ะะพะฟะธััะน ัะตััะพะฒัะต ะดะฐะฝะฝัะต
cp ~/kernel-shadows/season-1-shell-foundations/episode-02-shell-scripting/artifacts/servers.txt .

# ะะฐะฑะพัะฐะน ะทะดะตัั
nano server_monitor.sh
```

---

## ๐งช ะขะตััะพะฒัะต ัะตัะฒะตัั

ะคะฐะนะป `servers.txt` ัะพะดะตัะถะธั ะฝะตัะบะพะปัะบะพ ัะธะฟะพะฒ ัะตัะฒะตัะพะฒ ะดะปั ัะตััะธัะพะฒะฐะฝะธั:

### โ ะะฝะปะฐะนะฝ (ะดะพะปะถะฝั ะฑััั ะดะพัััะฟะฝั):
- **8.8.8.8** โ Google DNS (ะฟัะฑะปะธัะฝัะน, ะฒัะตะณะดะฐ online)
- **1.1.1.1** โ Cloudflare DNS (ะฟัะฑะปะธัะฝัะน, ะฒัะตะณะดะฐ online)
- **127.0.0.1** โ localhost (ะปะพะบะฐะปัะฝัะน, online ะตัะปะธ ัะธััะตะผะฐ ัะฐะฑะพัะฐะตั)

### โ ะััะปะฐะนะฝ (ะดะปั ัะตััะธัะพะฒะฐะฝะธั ะฐะปะตััะพะฒ):
- **192.168.255.255** โ ะฝะตัััะตััะฒัััะธะน IP (ะฒัะตะณะดะฐ offline)

### ๐ ะะฟะตัะฐัะธั KERNEL SHADOWS:
- **shadow-server-XX** โ ัะตัะฒะตัั ะพะฟะตัะฐัะธะธ (ัะธะผัะปััะธั, ัะบะพัะตะต ะฒัะตะณะพ offline)
- **backup-server-XX** โ backup ะธะฝััะฐััััะบัััะฐ
- **db-server-XX** โ ะฑะฐะทั ะดะฐะฝะฝัั
- **monitor-01** โ ะผะพะฝะธัะพัะธะฝะณ ัะตัะฒะตั

---

## ๐ ะะถะธะดะฐะตะผัะต ัะตะทัะปััะฐัั

ะะพัะปะต ะทะฐะฟััะบะฐ ัะฒะพะตะณะพ `server_monitor.sh` ะดะพะปะถะฝั ัะพะทะดะฐัััั:

### 1. `monitor.log` โ ะฟะพะปะฝัะน ะปะพะณ ะฒัะตั ะฟัะพะฒะตัะพะบ

**ะคะพัะผะฐั:**
```
[2025-10-04 16:30:15] === Monitoring started ===
[2025-10-04 16:30:15] test-server-01 (8.8.8.8) โ ONLINE
[2025-10-04 16:30:16] test-server-02 (1.1.1.1) โ ONLINE
[2025-10-04 16:30:18] shadow-server-01 (185.192.45.118) โ OFFLINE
[2025-10-04 16:30:25] === Monitoring completed | Online: 3/10 ===
```

**ะงัะพ ะดะพะปะถะฝะพ ะฑััั:**
- โ Timestamp ะฒ ัะพัะผะฐัะต `[YYYY-MM-DD HH:MM:SS]`
- โ ะะผั ัะตัะฒะตัะฐ ะธ IP
- โ ะกัะฐััั (ONLINE / OFFLINE)
- โ ะะฐัะฐะปะพ ะธ ะบะพะฝะตั ะฟัะพะฒะตัะบะธ

### 2. `alerts.txt` โ ัะพะปัะบะพ ะฟัะพะฑะปะตะผะฝัะต ัะตัะฒะตัั

**ะคะพัะผะฐั:**
```
[2025-10-04 16:30:18] ALERT: shadow-server-01 (185.192.45.118) is OFFLINE
[2025-10-04 16:30:22] ALERT: shadow-server-02 (185.192.45.119) is OFFLINE
```

**ะงัะพ ะดะพะปะถะฝะพ ะฑััั:**
- โ Timestamp
- โ ะัะตัะธะบั `ALERT:`
- โ ะขะพะปัะบะพ offline ัะตัะฒะตัั
- โ ะคะฐะนะป ะฟัััะพะน ะตัะปะธ ะฒัะต ัะตัะฒะตัั online

---

## ๐ฏ ะขัะตะฑะพะฒะฐะฝะธั ะบ ัะบัะธะฟัั

**Dmitry ะพะถะธะดะฐะตั:**

1. **ะคัะฝะบัะธะพะฝะฐะปัะฝะพััั:**
   - โ ะัะพะฒะตัะบะฐ ะฒัะตั ัะตัะฒะตัะพะฒ ะธะท `servers.txt`
   - โ ะัะพะฟััะบ ะบะพะผะผะตะฝัะฐัะธะตะฒ ะธ ะฟััััั ัััะพะบ
   - โ ะะพะณะธัะพะฒะฐะฝะธะต ั timestamps
   - โ ะะปะตััั ะดะปั offline ัะตัะฒะตัะพะฒ
   - โ ะกัะฐัะธััะธะบะฐ (total / online / offline)

2. **Exit codes:**
   - โ `0` โ ะฒัะต ัะตัะฒะตัั online
   - โ `1` โ ะตััั ะฟัะพะฑะปะตะผั (ัะพัั ะฑั ะพะดะธะฝ offline)

3. **Code quality:**
   - โ Shebang: `#!/bin/bash`
   - โ ะกััะพะณะธะน ัะตะถะธะผ: `set -euo pipefail`
   - โ ะคัะฝะบัะธะธ ั `local` ะฟะตัะตะผะตะฝะฝัะผะธ
   - โ ะะพะผะผะตะฝัะฐัะธะธ ะดะปั ัะปะพะถะฝะพะน ะปะพะณะธะบะธ
   - โ ะฆะฒะตัะฝะพะน ะฒัะฒะพะด (ะฑะพะฝัั)

---

## ๐ ะัะปะฐะดะบะฐ

### ะัะพะฑะปะตะผะฐ: "ัะฐะนะป ะฝะต ะฝะฐะนะดะตะฝ"

```bash
# ะัะพะฒะตัั ะฟััั ะบ servers.txt
ls -la servers.txt
ls -la artifacts/servers.txt

# ะ ัะบัะธะฟัะต ะธัะฟะพะปัะทัะน ะฟัะฐะฒะธะปัะฝัะน ะฟััั:
SERVERS_FILE="artifacts/servers.txt"  # ะตัะปะธ ะทะฐะฟััะบะฐะตัั ะธะท episode-02/
# ะธะปะธ
SERVERS_FILE="servers.txt"            # ะตัะปะธ ะทะฐะฟััะบะฐะตัั ะธะท artifacts/
```

### ะัะพะฑะปะตะผะฐ: "ping ะฝะต ัะฐะฑะพัะฐะตั"

```bash
# ะัะพะฒะตัั ะดะพัััะฟะฝะพััั ping
which ping

# ะขะตััะธััะน ะฒัััะฝัั
ping -c 1 -W 2 8.8.8.8

# ะัะพะฒะตัั firewall (ะตัะปะธ ะฝะฐ ัะตัะฒะตัะต)
sudo iptables -L | grep ICMP
```

### ะัะพะฑะปะตะผะฐ: "permission denied"

```bash
# ะกะดะตะปะฐะน ัะบัะธะฟั ะธัะฟะพะปะฝัะตะผัะผ
chmod +x server_monitor.sh

# ะัะพะฒะตัั permissions
ls -l server_monitor.sh
# ะะพะปะถะฝะพ ะฑััั: -rwxr-xr-x
```

---

## ๐ ะัะธะผะตั ะทะฐะฟััะบะฐ

```bash
$ cd ~/kernel-shadows/season-1-shell-foundations/episode-02-shell-scripting
$ chmod +x server_monitor.sh
$ ./server_monitor.sh

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ    KERNEL SHADOWS - Server Monitoring         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ test-server-01 (8.8.8.8) โ ONLINE
โ test-server-02 (1.1.1.1) โ ONLINE
โ test-server-03 (127.0.0.1) โ ONLINE
โ test-server-04 (192.168.255.255) โ OFFLINE
โ shadow-server-01 (185.192.45.118) โ OFFLINE

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ะกัะฐัะธััะธะบะฐ:
   ะัะตะณะพ ัะตัะฒะตัะพะฒ: 5
   ะะฝะปะฐะนะฝ: 3
   ะััะปะฐะนะฝ: 2

โ๏ธ  ะะฑะฝะฐััะถะตะฝั ะฟัะพะฑะปะตะผั! ะัะพะฒะตัั alerts.txt

๐ ะะพะณะธ: monitor.log
โ๏ธ  ะะปะตััั: alerts.txt
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

$ echo $?
1

$ cat monitor.log
[2025-10-04 16:45:12] === Monitoring started ===
[2025-10-04 16:45:12] test-server-01 (8.8.8.8) โ ONLINE
[2025-10-04 16:45:13] test-server-02 (1.1.1.1) โ ONLINE
...

$ cat alerts.txt
[2025-10-04 16:45:15] ALERT: test-server-04 (192.168.255.255) is OFFLINE
[2025-10-04 16:45:18] ALERT: shadow-server-01 (185.192.45.118) is OFFLINE
```

---

## ๐ก ะะพะดัะบะฐะทะบะธ ะพั LILITH

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ LILITH:                                                       โ
โ                                                               โ
โ "ะัั ััะพ ะฝัะถะฝะพ ะดะปั ัะฐะฑะพัั โ ะทะดะตัั. ะะผะธััะธะน ะฟะพะดะณะพัะพะฒะธะป       โ
โ  ัะตััะพะฒะพะต ะพะบััะถะตะฝะธะต.                                          โ
โ                                                               โ
โ  ะะพะดัะบะฐะทะบะธ:                                                   โ
โ  โข ะงะธัะฐะน ัะฐะนะป ัะตัะตะท while IFS= read -r line                  โ
โ  โข ะัะพะฟััะบะฐะน ะบะพะผะผะตะฝัะฐัะธะธ: [[ "$line" =~ ^# ]]                โ
โ  โข ะัะฟะพะปัะทัะน awk ะดะปั ะฟะฐััะธะฝะณะฐ: awk '{print $1}'              โ
โ  โข ะะพะณะธััะน ั timestamp: [$(date '+%Y-%m-%d %H:%M:%S')]        โ
โ  โข ะะฐะฒััะบะธ ะฒะพะบััะณ ะฟะตัะตะผะตะฝะฝัั: "$variable"                    โ
โ                                                               โ
โ  ะกะฟัะฐะฒะธัััั. ะะพะบะฐะถะธ ััะพ ัั ัะฟะพัะพะฑะตะฝ ะผััะปะธัั ะฐะปะณะพัะธัะผะธัะตัะบะธ." โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

<div align="center">

**OPERATION KERNEL SHADOWS**
*Episode 02 โ Server Monitoring & Bash Automation*

*"ะะผะธััะธะน ะถะดัั ัะตะทัะปััะฐัะพะฒ. Deadline โ 18:00. ะะพะบะฐะถะธ ะฝะฐ ััะพ ัะฟะพัะพะฑะตะฝ."*

**[โ README.md](../README.md) | [Tests โ](../tests/test.sh) | [Solution (ะฝะต ัะผะพััะธ!) โ](../solution/)**

</div>
