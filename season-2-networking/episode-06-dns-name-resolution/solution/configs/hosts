# KERNEL SHADOWS: Episode 06 — Local DNS Overrides
# /etc/hosts — Static hostname-to-IP mapping
# Stockholm, Sweden (Bahnhof Pionen)
#
# Format: IP_ADDRESS    HOSTNAME    [ALIASES...]
# Lines starting with # are comments

# ============================================================================
# Loopback addresses
# ============================================================================
127.0.0.1       localhost
127.0.1.1       $(hostname)

# IPv6 loopback
::1             localhost ip6-localhost ip6-loopback
ff02::1         ip6-allnodes
ff02::2         ip6-allrouters

# ============================================================================
# Operation Shadow Infrastructure (Private DNS)
# ============================================================================

# Core servers (internal IPs)
10.20.30.10     shadow-server-01.internal       shadow-01
10.20.30.11     shadow-server-02.internal       shadow-02
10.20.30.12     shadow-server-03.internal       shadow-03

# Database servers
10.20.30.20     shadow-db-01.internal           db-01
10.20.30.21     shadow-db-02.internal           db-02

# Monitoring (Grafana + Prometheus)
10.20.30.50     shadow-monitor.internal         monitor grafana prometheus

# Load balancer
10.20.30.100    shadow-lb.internal              lb

# ============================================================================
# Prevent DNS leaks (block known domains from public DNS)
# ============================================================================

# Block shadow domains from leaking to public DNS
# (Force to resolve locally or fail)
127.0.0.1       shadow-ops.net
127.0.0.1       operation-shadow.net
127.0.0.1       internal.shadow-ops.net

# ============================================================================
# Security: Block known malicious domains
# ============================================================================

# Prevent Krylov's known C2 servers
127.0.0.1       krylov-c2.onion
127.0.0.1       fsb-tracking.ru
127.0.0.1       suspicious-tracker.xyz

# ============================================================================
# Development/Testing (optional)
# ============================================================================

# Local development
# 127.0.0.1     dev.local
# 127.0.0.1     api.local

# ============================================================================
# Notes (Erik's wisdom):
#
# /etc/hosts is checked BEFORE DNS queries
#   → Can override DNS (useful for blocking or testing)
#   → Can speed up frequently accessed hosts
#   → Can provide offline access to known hosts
#
# Security uses:
#   → Block malicious domains (127.0.0.1 malware.com)
#   → Prevent tracking (127.0.0.1 tracker.example.com)
#   → Hide internal infrastructure from public DNS
#
# Priority order:
#   1. /etc/hosts (this file)
#   2. DNS cache (if enabled)
#   3. DNS query (to nameservers in /etc/resolv.conf)
#
# Testing:
#   ping shadow-01                    # Should resolve to 10.20.30.10
#   dig shadow-ops.net                # Should return 127.0.0.1 (blocked)
#   getent hosts shadow-server-01.internal  # Check hosts resolution
#
# ============================================================================
# Erik: "Hosts file is your first line of defense. Use it wisely.
#        Block malicious domains here BEFORE they reach DNS."
# ============================================================================

