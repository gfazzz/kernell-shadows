# Episode 22: –î—Ä–æ–Ω—ã –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–ü–õ–ê

> *"–î—Ä–æ–Ω ‚Äî —ç—Ç–æ –ª–µ—Ç–∞—é—â–∏–π –∫–æ–º–ø—å—é—Ç–µ—Ä. –û–¥–∏–Ω –±–∞–≥ = –ø–∞–¥–µ–Ω–∏–µ. –¢–µ—Å—Ç–∏—Ä—É–π –≤ —Å–∏–º—É–ª—è—Ç–æ—Ä–µ. –í—Å–µ–≥–¥–∞."* ‚Äî Li Wei

```
Season 6: Embedded Linux & IoT Security
Episode 22 of 32
–õ–æ–∫–∞—Ü–∏—è: –®—ç–Ω—å—á–∂—ç–Ω—å üá®üá≥, –ö–∏—Ç–∞–π (—à—Ç–∞–±-–∫–≤–∞—Ä—Ç–∏—Ä–∞ DJI)
–î–Ω–∏: 43-44 –æ–ø–µ—Ä–∞—Ü–∏–∏ KERNEL SHADOWS
–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 5-6 —á–∞—Å–æ–≤
–°–ª–æ–∂–Ω–æ—Å—Ç—å: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
–¢–∏–ø: –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–ü–õ–ê (Type B - Python)
```

---

## üìã –û–±–∑–æ—Ä —ç–ø–∏–∑–æ–¥–∞

### –ß—Ç–æ –≤—ã –∏–∑—É—á–∏—Ç–µ

–í —ç—Ç–æ–º —ç–ø–∏–∑–æ–¥–µ –≤—ã –æ—Å–≤–æ–∏—Ç–µ **–∞–≤—Ç–æ–Ω–æ–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—Ä–æ–Ω–æ–º** –¥–ª—è –Ω–∞–±–ª—é–¥–µ–Ω–∏—è:

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- üöÅ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ë–ü–õ–ê** ‚Äî –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥—Ä–æ–Ω–∞
- üì° **–ü—Ä–æ—Ç–æ–∫–æ–ª MAVLink** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- üéÆ **ArduPilot/PX4** ‚Äî —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–ø–∏–ª–æ—Ç–∞
- üêç **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—Ä–æ–Ω–æ–º –Ω–∞ Python** ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ pymavlink
- üó∫Ô∏è **–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–µ –º–∏—Å—Å–∏–∏** ‚Äî –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ç–æ—á–∫–∞–º
- üîê **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ UART

**–ù–∞–≤—ã–∫–∏:**
- –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ MAVLink
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ARM/DISARM/TAKEOFF/LAND –¥—Ä–æ–Ω–∞
- –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö –ø–æ–ª—ë—Ç–Ω—ã—Ö –º–∏—Å—Å–∏–π
- –ß—Ç–µ–Ω–∏–µ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ (GPS, –±–∞—Ç–∞—Ä–µ—è, –≤—ã—Å–æ—Ç–∞)
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ (–∑–Ω–∞–Ω–∏—è Season 5 security!)

**–í–∞–∂–Ω–æ:** **–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ü–†–ï–ñ–î–ï –í–°–ï–ì–û!** –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–µ–º –≤ SITL —Å–∏–º—É–ª—è—Ç–æ—Ä–µ –ø–µ—Ä–µ–¥ —Ä–µ–∞–ª—å–Ω—ã–º –ø–æ–ª—ë—Ç–æ–º. –ü—Ä–æ–ø–µ–ª–ª–µ—Ä—ã –º–æ–≥—É—Ç –Ω–∞–Ω–µ—Å—Ç–∏ —Å–µ—Ä—å—ë–∑–Ω—ã–µ —Ç—Ä–∞–≤–º—ã.

---

## üé¨ –°—é–∂–µ—Ç: –ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ

### –î–µ–Ω—å 43, —É—Ç—Ä–æ ‚Äî –®—ç–Ω—å—á–∂—ç–Ω—å, —à—Ç–∞–±-–∫–≤–∞—Ä—Ç–∏—Ä–∞ DJI

**Li Wei** (–±—ã–≤—à–∏–π –∏–Ω–∂–µ–Ω–µ—Ä DJI –ø–æ –¥—Ä–æ–Ω–∞–º) –≤–µ–¥—ë—Ç –ú–∞–∫—Å–∞ —á–µ—Ä–µ–∑ –æ–≥—Ä–æ–º–Ω–æ–µ –∑–¥–∞–Ω–∏–µ DJI:

*"–ó–¥–µ—Å—å –¥–µ–ª–∞—é—Ç 70% –º–∏—Ä–æ–≤—ã—Ö –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏—Ö –¥—Ä–æ–Ω–æ–≤. Phantom, Mavic, Inspire ‚Äî –≤—Å—ë –∑–¥–µ—Å—å. –ê ArduPilot ‚Äî —ç—Ç–æ open source –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞."*

–û–Ω–∏ –≤—Ö–æ–¥—è—Ç –≤ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é. –°—Ç–æ–ª—ã —Å –¥—Ä–æ–Ω–∞–º–∏. –û—Å—Ü–∏–ª–ª–æ–≥—Ä–∞—Ñ—ã. –ü–∞—è–ª—å–Ω—ã–µ —Å—Ç–∞–Ω—Ü–∏–∏. –°–∏–º—É–ª—è—Ç–æ—Ä –ø–æ–ª—ë—Ç–∞ –Ω–∞ –±–æ–ª—å—à–æ–º —ç–∫—Ä–∞–Ω–µ.

**Li Wei –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–≤–∞–¥—Ä–æ–∫–æ–ø—Ç–µ—Ä:**

```
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥—Ä–æ–Ω–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è:
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–æ–ª—ë—Ç–∞: Pixhawk (ArduPilot)
- GPS: u-blox NEO-M8N
- –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è: 433–ú–ì—Ü —Ä–∞–¥–∏–æ
- –ö–∞–º–µ—Ä–∞: Full HD, —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –ø–æ–¥–≤–µ—Å–µ
- –ë–∞—Ç–∞—Ä–µ—è: 4S 5000–º–ê—á LiPo
- –ú–æ—Ç–æ—Ä—ã: 920kV –±–µ—Å–∫–æ–ª–ª–µ–∫—Ç–æ—Ä–Ω—ã–µ √ó 4
- –ü—Ä–æ–ø–µ–ª–ª–µ—Ä—ã: 9" –∫–∞—Ä–±–æ–Ω
```

**Li Wei:** *"–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–æ–ª—ë—Ç–∞ ‚Äî —ç—Ç–æ –º–æ–∑–≥. –ü—Ä–æ—à–∏–≤–∫–∞ ArduPilot. –ü—Ä–æ—Ç–æ–∫–æ–ª MAVLink –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏. Python –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è."*

---

### –ú–∏—Å—Å–∏—è

**–í–∏–∫—Ç–æ—Ä (–≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫):**

*"Episode 21 ‚Äî –∫–∞–º–µ—Ä–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è. –•–æ—Ä–æ—à–æ. –ù–æ —Å—Ç–∞—Ç–∏—á–Ω–∞—è. –ù—É–∂–Ω–æ –º–æ–±–∏–ª—å–Ω–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ. –î—Ä–æ–Ω."*

**–î–º–∏—Ç—Ä–∏–π:** *"–ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ. –ü—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç. –ñ–∏–≤–∞—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è. –ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –ö—Ä—ã–ª–æ–≤ ‚Äî –º—ã –≤–∏–¥–∏–º."*

**–ê–ª–µ–∫—Å (–æ–∑–∞–±–æ—á–µ–Ω–Ω–æ—Å—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é):**

*"–ö—Ä—ã–ª–æ–≤ –º–æ–∂–µ—Ç –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –¥—Ä–æ–Ω. –ü–µ—Ä–µ—Ö–≤–∞—Ç UART. Li Wei, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ."*

**Li Wei:** *"–ó–Ω–∞–Ω–∏—è Season 5 Episode 20 —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥. AES-256. –ü–µ—Ä–µ—Ö–≤–∞—Ç UART –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω. –ü–æ–∫–∞–∂—É."*

---

### –¶–µ–ª—å

**–ú–∏—Å—Å–∏—è:** –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –¥—Ä–æ–Ω –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–≤–µ–¥–∫–∏

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
1. –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ MAVLink
2. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è ARM/DISARM/TAKEOFF/LAND
3. –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è –º–∏—Å—Å–∏—è –ø–æ —Ç–æ—á–∫–∞–º –º–∞—Ä—à—Ä—É—Ç–∞
4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ (GPS, –±–∞—Ç–∞—Ä–µ—è)
5. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ (–∞–Ω—Ç–∏-–ø–µ—Ä–µ—Ö–≤–∞—Ç)
6. –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –∞–≤–∞—Ä–∏–π–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (RTL, LAND)

**–°—Ä–æ–∫–∏:** 5-6 —á–∞—Å–æ–≤

**Li Wei:** *"–ù–∞—á–Ω—ë–º —Å –æ—Å–Ω–æ–≤. –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ MAVLink. –ü–æ—Ç–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ. –ü–æ—Ç–æ–º –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å. –ü–æ—Ç–æ–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ. –®–∞–≥ –∑–∞ —à–∞–≥–æ–º."*

**LILITH** (–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è): *"–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥—Ä–æ–Ω–æ–≤ ‚Äî —ç—Ç–æ –≥–¥–µ embedded Linux –≤—Å—Ç—Ä–µ—á–∞–µ—Ç —Ñ–∏–∑–∏–∫—É. –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—â–∞–µ—Ç –±–∞–≥–æ–≤. –û–¥–Ω–∞ –æ—à–∏–±–∫–∞ –≤ —Ä–∞—Å—á—ë—Ç–∞—Ö ‚Äî –¥—Ä–æ–Ω –∑–∞ $10,000 –ø–∞–¥–∞–µ—Ç. SITL —Å–∏–º—É–ª—è—Ç–æ—Ä ‚Äî —Ç–≤–æ–π –ª—É—á—à–∏–π –¥—Ä—É–≥."*

---

## üéì –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–ø–∏–∑–æ–¥–∞: 6 –º–∏–∫—Ä–æ-—Ü–∏–∫–ª–æ–≤

–ö–∞–∂–¥—ã–π —Ü–∏–∫–ª = 35-45 –º–∏–Ω—É—Ç:
- üé¨ –°—é–∂–µ—Ç (2-3 –º–∏–Ω)
- üìö –¢–µ–æ—Ä–∏—è (18-25 –º–∏–Ω)
- üíª –ü—Ä–∞–∫—Ç–∏–∫–∞ (12-15 –º–∏–Ω)
- ü§î –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–Ω–∏–º–∞–Ω–∏—è (2 –º–∏–Ω)

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** ~3 —á–∞—Å–∞ —Ç–µ–æ—Ä–∏–∏ + 2.5 —á–∞—Å–∞ –ø—Ä–∞–∫—Ç–∏–∫–∏ = 5-6 —á–∞—Å–æ–≤

---

## üîÑ –¶–∏–∫–ª 1: –ü—Ä–æ—Ç–æ–∫–æ–ª MAVLink –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è (40 –º–∏–Ω)

### üé¨ –°—é–∂–µ—Ç

**Li Wei –ø–æ–¥–∫–ª—é—á–∞–µ—Ç Pixhawk –∫ –Ω–æ—É—Ç–±—É–∫—É:**

USB –∫–∞–±–µ–ª—å. LED –Ω–∞ Pixhawk –º–∏–≥–∞–µ—Ç. –¢–µ—Ä–º–∏–Ω–∞–ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

```
MAVLink: heartbeat –æ—Ç —Å–∏—Å—Ç–µ–º—ã 1, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ 1
–†–µ–∂–∏–º: STABILIZE
–ë–∞—Ç–∞—Ä–µ—è: 16.8–í, 0–ê
GPS: –ù–µ—Ç Fix
```

**Li Wei:** *"MAVLink ‚Äî —ç—Ç–æ lingua franca –¥—Ä–æ–Ω–æ–≤. –û–±—â–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª. ArduPilot, PX4, DJI (—á–∞—Å—Ç–∏—á–Ω–æ) ‚Äî –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç. TCP/UDP/Serial. XML-–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è."*

### üìö –¢–µ–æ—Ä–∏—è: –ü—Ä–æ—Ç–æ–∫–æ–ª MAVLink

#### –ß—Ç–æ —Ç–∞–∫–æ–µ MAVLink?

**MAVLink (Micro Air Vehicle Link - —Å–≤—è–∑—å –º–∏–∫—Ä–æ-–≤–æ–∑–¥—É—à–Ω—ã—Ö –∞–ø–ø–∞—Ä–∞—Ç–æ–≤):**
- –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –¥—Ä–æ–Ω–æ–≤/–ë–ü–õ–ê
- –ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π)
- –ó–∞–ø—Ä–æ—Å/–æ—Ç–≤–µ—Ç + –ø–æ—Ç–æ–∫–∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
- –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: Serial, UDP, TCP

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤:**
```
HTTP:     –¢–µ–∫—Å—Ç–æ–≤—ã–π, —Ç—è–∂—ë–ª—ã–π, –≤–µ–±
MQTT:     Pub/sub, IoT (Episode 23)
MAVLink:  –ë–∏–Ω–∞—Ä–Ω—ã–π, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –¥–ª—è –ë–ü–õ–ê, —Ä–µ–∞–ª-—Ç–∞–π–º
```

#### üè† –ú–µ—Ç–∞—Ñ–æ—Ä–∞: –ê–≤–∏–∞–¥–∏—Å–ø–µ—Ç—á–µ—Ä

**MAVLink —ç—Ç–æ:**
- –ö–∞–∫ —Ä–∞–¥–∏–æ—Å–≤—è–∑—å –ø–∏–ª–æ—Ç–∞ —Å –≤—ã—à–∫–æ–π
- –ü–∏–ª–æ—Ç (GCS - –Ω–∞–∑–µ–º–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è) –≥–æ–≤–æ—Ä–∏—Ç: "–ó–∞–ø—Ä–∞—à–∏–≤–∞—é —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –≤–∑–ª—ë—Ç"
- –í—ã—à–∫–∞ (–¥—Ä–æ–Ω) –æ—Ç–≤–µ—á–∞–µ—Ç: "–†–∞–∑—Ä–µ—à—ë–Ω –≤–∑–ª—ë—Ç, –ø–æ–ª–æ—Å–∞ 09"
- –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è: "–í—ã—Å–æ—Ç–∞ 500 —Ñ—É—Ç–æ–≤, —Å–∫–æ—Ä–æ—Å—Ç—å 60 —É–∑–ª–æ–≤"

**LILITH:** *"–ë–µ–∑ MAVLink –¥—Ä–æ–Ω –≥–ª—É—Ö–æ–Ω–µ–º–æ–π. –° MAVLink ‚Äî –æ–Ω –≥–æ–≤–æ—Ä–∏—Ç '–Ø –ª–µ—á—É, –≤—ã—Å–æ—Ç–∞ 50–º, –±–∞—Ç–∞—Ä–µ—è 75%, –≤—Å—ë —Ö–æ—Ä–æ—à–æ'. –ò–ª–∏ '–ü–û–ú–û–ì–ò–¢–ï! –ë–∞—Ç–∞—Ä–µ—è 5%, –≤–æ–∑–≤—Ä–∞—â–∞—é—Å—å –¥–æ–º–æ–π!' –Ø–∑—ã–∫ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ."*

#### –¢–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**

**1. –ö–æ–º–∞–Ω–¥—ã (GCS ‚Üí –î—Ä–æ–Ω):**
```python
MAV_CMD_COMPONENT_ARM_DISARM  # ARM/DISARM –º–æ—Ç–æ—Ä–æ–≤
MAV_CMD_NAV_TAKEOFF           # –í–∑–ª—ë—Ç
MAV_CMD_NAV_LAND              # –ü–æ—Å–∞–¥–∫–∞
MAV_CMD_DO_SET_MODE           # –°–º–µ–Ω–∞ —Ä–µ–∂–∏–º–∞
```

**2. –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è (–î—Ä–æ–Ω ‚Üí GCS):**
```python
HEARTBEAT              # –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
GLOBAL_POSITION_INT    # GPS –ø–æ–∑–∏—Ü–∏—è
ATTITUDE               # –ö—Ä–µ–Ω/—Ç–∞–Ω–≥–∞–∂/—Ä—ã—Å–∫–∞–Ω—å–µ
SYS_STATUS             # –ë–∞—Ç–∞—Ä–µ—è, –¥–∞—Ç—á–∏–∫–∏
```

**3. –ú–∏—Å—Å–∏—è (GCS ‚Üî –î—Ä–æ–Ω):**
```python
MISSION_COUNT          # –†–∞–∑–º–µ—Ä –º–∏—Å—Å–∏–∏
MISSION_ITEM_INT       # –¢–æ—á–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞
MISSION_ACK            # –ú–∏—Å—Å–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –û–ö
```

**üí° "Aha!" –º–æ–º–µ–Ω—Ç: –ü–æ—á–µ–º—É –±–∏–Ω–∞—Ä–Ω—ã–π, –∞ –Ω–µ JSON?**

<details>
<summary>–û—Ç–∫—Ä–æ–π—Ç–µ —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å</summary>

**JSON (—Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç):**
```json
{
  "type": "GLOBAL_POSITION_INT",
  "lat": 377749000,
  "lon": -1224194000,
  "alt": 1000
}
= 95 –±–∞–π—Ç
```

**MAVLink (–±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç):**
```
–ó–∞–≥–æ–ª–æ–≤–æ–∫: 6 –±–∞–π—Ç
Payload:   28 –±–∞–π—Ç (lat, lon, alt = –ø–æ 4 –±–∞–π—Ç–∞ –∫–∞–∂–¥—ã–π)
–ö–æ–Ω—Ç—Ä–æ–ª—å:  2 –±–∞–π—Ç–∞
= 36 –±–∞–π—Ç
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:**
```
JSON:    95 –±–∞–π—Ç, –º–µ–¥–ª–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
MAVLink: 36 –±–∞–π—Ç, –ø—Ä—è–º–æ–µ —á—Ç–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

–ü—Ä–∏ 4 –ì—Ü —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ (–∫–∞–∂–¥—ã–µ 250–º—Å):
JSON:    380 –±–∞–π—Ç/—Å–µ–∫ = 3 –∫–±–∏—Ç/—Å–µ–∫
MAVLink: 144 –±–∞–π—Ç/—Å–µ–∫ = 1.1 –∫–±–∏—Ç/—Å–µ–∫

–ù–∞ 433–ú–ì—Ü —Ä–∞–¥–∏–æ (19.2 –∫–±–∏—Ç/—Å–µ–∫):
JSON:    ~50 —Å–æ–æ–±—â–µ–Ω–∏–π —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤/—Å–µ–∫
MAVLink: ~130 —Å–æ–æ–±—â–µ–Ω–∏–π —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤/—Å–µ–∫
```

**–í—ã–≤–æ–¥:** –ù–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ä–∞–¥–∏–æ –∫–∞–Ω–∞–ª–∞—Ö –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫—Ä–∏—Ç–∏—á–µ–Ω!

**Li Wei:** *"–î—Ä–æ–Ω –≤ –∫–∏–ª–æ–º–µ—Ç—Ä–µ –æ—Ç —Ç–µ–±—è. 433–ú–ì—Ü —Ä–∞–¥–∏–æ. –ö–∞–∂–¥—ã–π –±–∞–π—Ç –Ω–∞ —Å—á–µ—Ç—É. JSON = —Ä–æ—Å–∫–æ—à—å –¥–ª—è WiFi/4G. MAVLink = –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –¥–ª—è —Ä–∞–¥–∏–æ. –ú–∏–Ω–∏–º–∞–ª–∏–∑–º —Å–ø–∞—Å–∞–µ—Ç –∂–∏–∑–Ω–∏ (–±–∞—Ç–∞—Ä–µ—é –¥—Ä–æ–Ω–∞)."*

</details>

#### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ pymavlink

**Python –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**

```python
from pymavlink import mavutil

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
master = mavutil.mavlink_connection('udp:127.0.0.1:14550')

# –ñ–¥–∞—Ç—å heartbeat
master.wait_heartbeat()

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
master.mav.command_long_send(
    master.target_system,
    master.target_component,
    mavutil.mavlink.MAV_CMD_COMPONENT_ARM_DISARM,
    0,  # –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
    1,  # param1 (1=arm)
    0, 0, 0, 0, 0, 0
)

# –ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
msg = master.recv_match(type='GLOBAL_POSITION_INT', blocking=True)
```

#### –¢–∏–ø—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**Serial (—Ä–µ–∞–ª—å–Ω—ã–π –¥—Ä–æ–Ω):**
```python
# USB –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
'/dev/ttyUSB0' (baud=57600)
'/dev/ttyACM0' (baud=115200)
```

**UDP (—Å–∏–º—É–ª—è—Ç–æ—Ä):**
```python
# ArduPilot SITL
'udp:127.0.0.1:14550'
```

**TCP:**
```python
# –°–µ—Ç–µ–≤–æ–π –¥—Ä–æ–Ω
'tcp:192.168.1.100:5760'
```

---

### üíª –ü—Ä–∞–∫—Ç–∏–∫–∞: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ MAVLink

**–ó–∞–¥–∞–Ω–∏–µ:**

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pymavlink:**
```bash
pip3 install pymavlink
```

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å SITL —Å–∏–º—É–ª—è—Ç–æ—Ä (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å MAVProxy
pip3 install MAVProxy

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–º—É–ª—è—Ç–æ—Ä ArduCopter
sim_vehicle.py -v ArduCopter --console --map

# –°–∏–º—É–ª—è—Ç–æ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ udp:127.0.0.1:14550
```

3. **–¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
```bash
cd ~/kernel-shadows/season-6-embedded-iot/episode-22-drones/artifacts/examples

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
python3 mavlink_basics.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
=== –ë–∞–∑–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ MAVLink ===
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫: udp:127.0.0.1:14550
–û–∂–∏–¥–∞–Ω–∏–µ heartbeat...
‚úì Heartbeat –æ—Ç —Å–∏—Å—Ç–µ–º—ã 1

–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ (10 —Å–µ–∫—É–Ω–¥)...
GPS: 37.774900, -122.419400, –í—ã—Å: 0.0–º
–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è: R:0.0¬∞ P:0.0¬∞ Y:45.0¬∞
–ë–∞—Ç–∞—Ä–µ—è: 16.8–í, 0.0–ê, 100%
...
‚úì –¢–µ—Å—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à—ë–Ω
```

4. **–ß–∏—Ç–∞—Ç—å —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é:**
```bash
python3 telemetry_read.py
```

5. **–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç:**
```python
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–≤–æ—ë –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
from pymavlink import mavutil
import time

master = mavutil.mavlink_connection('udp:127.0.0.1:14550')
master.wait_heartbeat()
print(f"–ü–æ–¥–∫–ª—é—á–µ–Ω –∫ —Å–∏—Å—Ç–µ–º–µ {master.target_system}")

# –ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö
master.mav.request_data_stream_send(
    master.target_system,
    master.target_component,
    mavutil.mavlink.MAV_DATA_STREAM_ALL,
    4,  # –ì—Ü
    1
)

# –ß–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
for i in range(10):
    msg = master.recv_match(blocking=True, timeout=1)
    if msg:
        print(f"{msg.get_type()}: {msg}")
    time.sleep(0.5)
```

---

### ü§î –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–Ω–∏–º–∞–Ω–∏—è

**LILITH:** *"MAVLink –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –¥—Ä–æ–Ω–æ–≤. –ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –ª–æ–∂—å?"*

<details>
<summary>ü§î –ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è MAVLink</summary>

**–û—Ç–≤–µ—Ç:** **–õ–û–ñ–¨! MAVLink —à–∏—Ä–µ —á–µ–º –¥—Ä–æ–Ω—ã.**

**MAVLink –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:**

**–ë–ü–õ–ê (–î—Ä–æ–Ω—ã):**
- –ö–≤–∞–¥—Ä–æ–∫–æ–ø—Ç–µ—Ä—ã, –≥–µ–∫—Å–∞–∫–æ–ø—Ç–µ—Ä—ã
- –°–∞–º–æ–ª—ë—Ç—ã —Å –Ω–µ–ø–æ–¥–≤–∏–∂–Ω—ã–º –∫—Ä—ã–ª–æ–º
- VTOL (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –≤–∑–ª—ë—Ç/–ø–æ—Å–∞–¥–∫–∞)

**–ù–∞–∑–µ–º–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã:**
- –†–æ–≤–µ—Ä—ã
- –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏
- –ù–∞–∑–µ–º–Ω—ã–µ —Ä–æ–±–æ—Ç—ã

**–ú–æ—Ä—Å–∫–∏–µ:**
- –õ–æ–¥–∫–∏
- –ü–æ–¥–≤–æ–¥–Ω—ã–µ –ª–æ–¥–∫–∏ (AUV)

**–î—Ä—É–≥–∏–µ:**
- –ê–Ω—Ç–µ–Ω–Ω—ã–µ —Ç—Ä–µ–∫–µ—Ä—ã
- –°–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã
- –ù–∞–∑–µ–º–Ω—ã–µ —Å—Ç–∞–Ω—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ü–æ—á–µ–º—É —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π:**
- –û–±—â–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª —Å–æ–æ–±—â–µ–Ω–∏–π
- –ù–µ drone-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- Vehicle-agnostic –¥–∏–∑–∞–π–Ω
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä—ã:**
```python
# –†–æ–≤–µ—Ä (ArduRover)
master = mavutil.mavlink_connection('/dev/ttyUSB0')

# –ü–æ–¥–≤–æ–¥–Ω–∞—è –ª–æ–¥–∫–∞ (ArduSub)
master = mavutil.mavlink_connection('udp:192.168.2.1:14550')

# –°–∞–º–æ–ª—ë—Ç (ArduPlane)
master = mavutil.mavlink_connection('tcp:10.0.0.5:5760')

# –ê–Ω—Ç–µ–Ω–Ω—ã–π —Ç—Ä–µ–∫–µ—Ä
master = mavutil.mavlink_connection('/dev/ttyACM0')
```

**Li Wei:** *"MAVLink ‚Äî —ç—Ç–æ –Ω–µ 'drone protocol'. –≠—Ç–æ 'autonomous vehicle protocol'. –ö–≤–∞–¥—Ä–æ–∫–æ–ø—Ç–µ—Ä, —Å–∞–º–æ–ª—ë—Ç, –ª–æ–¥–∫–∞, —Ä–æ–≤–µ—Ä ‚Äî –≤—Å–µ –≥–æ–≤–æ—Ä—è—Ç –Ω–∞ MAVLink. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —è–∑—ã–∫ –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö —Å–∏—Å—Ç–µ–º."*

**üí° –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç:** NASA –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MAVLink –¥–ª—è –º–∞—Ä—Å–∏–∞–Ω—Å–∫–æ–≥–æ –≤–µ—Ä—Ç–æ–ª—ë—Ç–∞ Ingenuity!

</details>

---

[–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç...]

*Part 1/3 of Episode 22 README.md ‚Äî –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è*
*–¶–∏–∫–ª—ã 2-6 –≤ —Å–ª–µ–¥—É—é—â–µ–π —á–∞—Å—Ç–∏*
## üîÑ –¶–∏–∫–ª 2: –û—Å–Ω–æ–≤—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—Ä–æ–Ω–æ–º (ARM/DISARM/TAKEOFF) (45 –º–∏–Ω)

### üé¨ –°—é–∂–µ—Ç

**Li Wei:** *"–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ MAVLink —Ä–∞–±–æ—Ç–∞–µ—Ç. –¢–µ–ø–µ—Ä—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ. –ù–æ –û–°–¢–û–†–û–ñ–ù–û."*

–û–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥—Ä–æ–Ω –Ω–∞ —Å—Ç–æ–ª–µ. –ü—Ä–æ–ø–µ–ª–ª–µ—Ä—ã —Å–Ω—è—Ç—ã.

**Li Wei:** *"–ù–ò–ö–û–ì–î–ê –Ω–µ —Ç–µ—Å—Ç–∏—Ä—É–π ARM —Å –ø—Ä–æ–ø–µ–ª–ª–µ—Ä–∞–º–∏ –Ω–∞ —Å—Ç–æ–ª–µ. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ. –í —Å–∏–º—É–ª—è—Ç–æ—Ä–µ ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ. –ù–∞ —Å—Ç–æ–ª–µ —Å –ø—Ä–æ–ø–µ–ª–ª–µ—Ä–∞–º–∏ ‚Äî –ø–∞–ª—å—Ü—ã –ø–æ—Ç–µ—Ä—è–Ω—ã. –í –≤–æ–∑–¥—É—Ö–µ ‚Äî –∫—Ä—ç—à. –ü–æ—Ä—è–¥–æ–∫: —Å–∏–º—É–ª—è—Ç–æ—Ä ‚Üí —Å—Ç–æ–ª –±–µ–∑ –ø—Ä–æ–ø–µ–ª–ª–µ—Ä–æ–≤ ‚Üí –ø–æ–ª–µ–≤–æ–π —Ç–µ—Å—Ç."*

###

 üìö –¢–µ–æ—Ä–∏—è: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—Ä–æ–Ω–æ–º

#### –ü—Ä–µ–¥–ø–æ–ª—ë—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ ARM:**

```python
def pre_arm_checks():
    # 1. GPS —Ñ–∏–∫—Å–∞—Ü–∏—è
    if gps_sats < 8:
        return False, "GPS –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ"
    
    # 2. –ë–∞—Ç–∞—Ä–µ—è
    if battery_voltage < 14.4:  # 4S LiPo –Ω–∏–∑–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ
        return False, "–ë–∞—Ç–∞—Ä–µ—è —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∞—è"
    
    # 3. –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∫–æ–º–ø–∞—Å–∞
    if compass_not_calibrated():
        return False, "–û—Ç–∫–∞–ª–∏–±—Ä—É–π—Ç–µ –∫–æ–º–ø–∞—Å"
    
    # 4. –ù–µ—Ç –æ—à–∏–±–æ–∫
    if sys_status_errors:
        return False, "–ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ—à–∏–±–∫–∏"
    
    return True, "OK"
```

#### üè† –ú–µ—Ç–∞—Ñ–æ—Ä–∞: –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–∏–ª–æ—Ç–∞

**–ü—Ä–µ–¥–ø–æ–ª—ë—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—Ä–æ–Ω–∞ = –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ Boeing 737:**

**–ü–∏–ª–æ—Ç —Å–∞–º–æ–ª—ë—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
```
‚úì –¢–æ–ø–ª–∏–≤–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ?
‚úì –î–≤–∏–≥–∞—Ç–µ–ª–∏ –≤ –Ω–æ—Ä–º–µ?
‚úì –ù–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç?
‚úì –°–≤—è–∑—å —Å –≤—ã—à–∫–æ–π?
‚úì –ü–æ–≥–æ–¥–∞ –¥–æ–ø—É—Å—Ç–∏–º–∞?

–ü—Ä–æ–ø—É—Å—Ç–∏–ª –ø—Ä–æ–≤–µ—Ä–∫—É = –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞
```

**–î—Ä–æ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
```
‚úì –ë–∞—Ç–∞—Ä–µ—è >80%?
‚úì GPS 8+ —Å–ø—É—Ç–Ω–∏–∫–æ–≤?
‚úì –ö–æ–º–ø–∞—Å –æ—Ç–∫–∞–ª–∏–±—Ä–æ–≤–∞–Ω?
‚úì –ú–æ—Ç–æ—Ä—ã —Å–≤–æ–±–æ–¥–Ω–æ –≤—Ä–∞—â–∞—é—Ç—Å—è?
‚úì Geofence –∞–∫—Ç–∏–≤–µ–Ω?

–ü—Ä–æ–ø—É—Å—Ç–∏–ª –ø—Ä–æ–≤–µ—Ä–∫—É = –ø–∞–¥–µ–Ω–∏–µ
```

**LILITH:** *"–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø–∏–ª–æ—Ç—ã —Ç—Ä–∞—Ç—è—Ç 30 –º–∏–Ω—É—Ç –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–µ–¥ 2-—á–∞—Å–æ–≤—ã–º –ø–æ–ª—ë—Ç–æ–º. –î—Ä–æ–Ω-–ø–∏–ª–æ—Ç –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å —Ç–æ –∂–µ. –ù–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –¥—É–º–∞—é—Ç '—ç—Ç–æ –∂–µ –∏–≥—Ä—É—à–∫–∞, –ø—Ä–æ—Å—Ç–æ –≤–∑–ª–µ—Ç–∏–º'. –†–µ–∑—É–ª—å—Ç–∞—Ç? YouTube –ø–æ–ª–æ–Ω –ø–∞–¥–µ–Ω–∏–π –¥—Ä–æ–Ω–æ–≤. –ù–µ –±—É–¥—å –∏–º–∏."*

#### ARM/DISARM

**–ö–æ–º–∞–Ω–¥–∞ ARM:**
```python
master.mav.command_long_send(
    master.target_system,
    master.target_component,
    mavutil.mavlink.MAV_CMD_COMPONENT_ARM_DISARM,
    0,      # –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
    1,      # param1: 1=arm, 0=disarm
    0, 0, 0, 0, 0, 0
)

# –ñ–¥–∞—Ç—å ACK
ack = master.recv_match(type='COMMAND_ACK', blocking=True, timeout=3)
if ack and ack.result == 0:
    print("Armed!")
```

**–ê–≤–∞—Ä–∏–π–Ω—ã–π DISARM (–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π):**
```python
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π disarm (–¥–∞–∂–µ –≤ –≤–æ–∑–¥—É—Ö–µ - –û–ü–ê–°–ù–û!)
master.mav.command_long_send(
    master.target_system,
    master.target_component,
    mavutil.mavlink.MAV_CMD_COMPONENT_ARM_DISARM,
    0,
    0,      # disarm
    21196,  # param2: –º–∞–≥–∏—á–µ—Å–∫–æ–µ —á–∏—Å–ª–æ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ disarm
    0, 0, 0, 0, 0
)
```

**üí° "Aha!" –º–æ–º–µ–Ω—Ç: –ü–æ—á–µ–º—É 21196?**

<details>
<summary>–°–µ–∫—Ä–µ—Ç–Ω–∞—è –∑–∞—â–∏—Ç–∞</summary>

**–ú–∞–≥–∏—á–µ—Å–∫–æ–µ —á–∏—Å–ª–æ 21196 = –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ disarm –≤ –≤–æ–∑–¥—É—Ö–µ!**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–î—Ä–æ–Ω –≤ –≤–æ–∑–¥—É—Ö–µ, 50 –º–µ—Ç—Ä–æ–≤
–ö—Ç–æ-—Ç–æ —Å–ª—É—á–∞–π–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç DISARM
‚Üí –ú–æ—Ç–æ—Ä—ã –í–´–ö–õ–Æ–ß–ê–Æ–¢–°–Ø
‚Üí –î—Ä–æ–Ω –ü–ê–î–ê–ï–¢
‚Üí $10,000 —É–±—ã—Ç–∫–æ–≤
```

**–†–µ—à–µ–Ω–∏–µ ArduPilot:**
```c
if (in_air && param1 == 0) {
    if (param2 != 21196) {  // –ú–∞–≥–∏—á–µ—Å–∫–æ–µ —á–∏—Å–ª–æ
        return COMMAND_DENIED;
    }
}

–û–±—ã—á–Ω—ã–π DISARM: param2 = 0 ‚Üí –æ—Ç–∫–ª–æ–Ω—ë–Ω –≤ –≤–æ–∑–¥—É—Ö–µ
–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π: param2 = 21196 ‚Üí —Ä–∞–∑—Ä–µ—à—ë–Ω –≤–µ–∑–¥–µ
```

**–ü–æ—á–µ–º—É 21196?**
```
0x52B4 –≤ hex
–°–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ? –ù–µ—Ç!
–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –≤ ArduPilot –∫–æ–¥–µ
–î–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å —á—Ç–æ–±—ã –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ disarm
```

**Li Wei:** *"–≠—Ç–æ –∫–∞–∫ –∫–æ–¥ —Å–∞–º–æ—É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è –≤ —Ñ–∏–ª—å–º–∞—Ö. –ù–µ–ª—å–∑—è —Å–ª—É—á–∞–π–Ω–æ –Ω–∞–∂–∞—Ç—å. –ù—É–∂–Ω–æ –ó–ù–ê–¢–¨ –∫–æ–¥. 21196 = '—è —Å–µ—Ä—å—ë–∑–Ω–æ, —è –∑–Ω–∞—é —á—Ç–æ –¥–µ–ª–∞—é, disarm –°–ï–ô–ß–ê–°'. –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö."*

</details>

#### –†–µ–∂–∏–º—ã –ø–æ–ª—ë—Ç–∞

**–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Ä–µ–∂–∏–º—ã:**
```
STABILIZE: –†—É—á–Ω–æ–π —Å —Å–∞–º–æ-–≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ–º
ALT_HOLD:  –£–¥–µ—Ä–∂–∞–Ω–∏–µ –≤—ã—Å–æ—Ç—ã, —Ä—É—á–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
LOITER:    –£–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (GPS)
GUIDED:    –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã GCS
AUTO:      –°–ª–µ–¥—É–µ—Ç —Ç–æ—á–∫–∞–º –º–∏—Å—Å–∏–∏
RTL:       Return to Launch (–≤–æ–∑–≤—Ä–∞—Ç –¥–æ–º–æ–π)
LAND:      –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ—Å–∞–¥–∫–∞
```

**–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–∂–∏–º:**
```python
master.set_mode('GUIDED')
# –∏–ª–∏
master.set_mode_apm('GUIDED')
```

**–ö–æ–≥–¥–∞ –∫–∞–∫–æ–π —Ä–µ–∂–∏–º:**
```
STABILIZE: –†—É—á–Ω–æ–π –ø–æ–ª—ë—Ç, –æ–±—É—á–µ–Ω–∏–µ
ALT_HOLD:  –†—É—á–Ω–æ–π —Å —É–¥–µ—Ä–∂–∞–Ω–∏–µ–º –≤—ã—Å–æ—Ç—ã
LOITER:    Hover –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (GPS)
GUIDED:    Python/—Å–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
AUTO:      –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è –º–∏—Å—Å–∏—è
RTL:       –ë–∞—Ç–∞—Ä–µ—è –Ω–∏–∑–∫–∞—è, –≤–µ—Ä–Ω—É—Ç—å—Å—è –¥–æ–º–æ–π
LAND:      –ê–≤–∞—Ä–∏–π–Ω–∞—è –ø–æ—Å–∞–¥–∫–∞
```

#### TAKEOFF (–í–∑–ª—ë—Ç)

**–í–∑–ª—ë—Ç –≤ —Ä–µ–∂–∏–º–µ GUIDED:**
```python
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ä–µ–∂–∏–º–µ GUIDED
master.set_mode('GUIDED')

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤–∑–ª—ë—Ç–∞
master.mav.command_long_send(
    master.target_system,
    master.target_component,
    mavutil.mavlink.MAV_CMD_NAV_TAKEOFF,
    0,
    0, 0, 0, 0, 0, 0,
    altitude  # –º–µ—Ç—Ä—ã AGL (–Ω–∞–¥ –∑–µ–º–ª—ë–π)
)
```

**–ñ–¥–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã:**
```python
while True:
    msg = master.recv_match(type='GLOBAL_POSITION_INT', blocking=True)
    current_alt = msg.relative_alt / 1000  # –º–º –≤ –º
    if current_alt >= target_alt * 0.95:  # 95% –æ—Ç —Ü–µ–ª–∏
        break
    time.sleep(0.5)
```

---

### üíª –ü—Ä–∞–∫—Ç–∏–∫–∞: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—Ä–æ–Ω–æ–º

**–ó–∞–¥–∞–Ω–∏–µ:**

1. **–ó–∞–≤–µ—Ä—à–∏—Ç—å starter –∫–æ–¥:**
```bash
cd ~/kernel-shadows/season-6-embedded-iot/episode-22-drones/starter/python

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å drone_control.py
nano drone_control.py
```

2. **–ö–ª—é—á–µ–≤—ã–µ TODO –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
```python
# TODO 1: –°–æ–∑–¥–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
self.master = mavutil.mavlink_connection(connection_string)

# TODO 2: –ñ–¥–∞—Ç—å heartbeat
self.master.wait_heartbeat()

# TODO 3: ARM –∫–æ–º–∞–Ω–¥–∞
self.master.mav.command_long_send(...)

# TODO 5: TAKEOFF –∫–æ–º–∞–Ω–¥–∞
self.master.mav.command_long_send(
    ...,
    mavutil.mavlink.MAV_CMD_NAV_TAKEOFF,
    ...,
    altitude
)
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Å–∏–º—É–ª—è—Ç–æ—Ä–µ:**
```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å SITL
sim_vehicle.py -v ArduCopter

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
python3 drone_control.py
```

4. **–û–∂–∏–¥–∞–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
```
=== –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥—Ä–æ–Ω–∞ - Episode 22 ===
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫: udp:127.0.0.1:14550
‚úì –ü–æ–¥–∫–ª—é—á–µ–Ω –∫ —Å–∏—Å—Ç–µ–º–µ 1

–ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –æ—Ö—Ä–∞–Ω—É...
‚úì Armed

–í–∑–ª—ë—Ç –Ω–∞ 10–º...
‚úì –ö–æ–º–∞–Ω–¥–∞ –≤–∑–ª—ë—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞
–ù–∞–±–æ—Ä –≤—ã—Å–æ—Ç—ã... –í—ã—Å–æ—Ç–∞: 2.5–º
–ù–∞–±–æ—Ä –≤—ã—Å–æ—Ç—ã... –í—ã—Å–æ—Ç–∞: 5.8–º
–ù–∞–±–æ—Ä –≤—ã—Å–æ—Ç—ã... –í—ã—Å–æ—Ç–∞: 9.2–º
‚úì –î–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ –≤—ã—Å–æ—Ç–∞ 10–º

=== –†–µ–∂–∏–º –Ω–∞–±–ª—é–¥–µ–Ω–∏—è ===
...

–ü–æ—Å–∞–¥–∫–∞...
‚úì –ü—Ä–∏–∑–µ–º–ª—ë–Ω

–°–Ω—è—Ç–∏–µ —Å –æ—Ö—Ä–∞–Ω—ã...
‚úì Disarmed

‚úì –ú–∏—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
```

---

[–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç...]

*Episode 22 Part 2 - —Ü–∏–∫–ª—ã 3-6 –≤ —Å–ª–µ–¥—É—é—â–µ–π —á–∞—Å—Ç–∏*
## üîÑ –¶–∏–∫–ª 3: –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–µ –º–∏—Å—Å–∏–∏ (—Ç–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞) (45 –º–∏–Ω)

### üé¨ –°—é–∂–µ—Ç

**Li Wei –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–ª–∞–Ω –º–∏—Å—Å–∏–∏:**

```
–ú–∏—Å—Å–∏—è –ø–æ —Ç–æ—á–∫–∞–º:
1. –í–∑–ª—ë—Ç –¥–æ 15–º
2. –õ–µ—Ç–µ—Ç—å –∫ —Ç–æ—á–∫–µ A (37.7750, -122.4194)
3. –õ–µ—Ç–µ—Ç—å –∫ —Ç–æ—á–∫–µ B (37.7750, -122.4184)
4. –õ–µ—Ç–µ—Ç—å –∫ —Ç–æ—á–∫–µ C (37.7749, -122.4184)
5. –í–µ—Ä–Ω—É—Ç—å—Å—è –¥–æ–º–æ–π
6. –ü–æ—Å–∞–¥–∫–∞
```

**Li Wei:** *"–†–µ–∂–∏–º AUTO. –î—Ä–æ–Ω —Å–ª–µ–¥—É–µ—Ç —Ç–æ—á–∫–∞–º –∞–≤—Ç–æ–Ω–æ–º–Ω–æ. –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–∏—Å—Å–∏—é, –∑–∞–ø—É—Å—Ç–∏—Ç—å AUTO, –¥—Ä–æ–Ω –ª–µ—Ç–∏—Ç —Å–∞–º. –°–µ—Ç–∫–∞ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –Ω–∞–±–ª—é–¥–µ–Ω–∏—è."*

### üìö –¢–µ–æ—Ä–∏—è: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏—Å—Å–∏–∏

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞

**MAVLink item –º–∏—Å—Å–∏–∏:**
```python
master.mav.mission_item_int_send(
    target_system,
    target_component,
    seq,                    # –ù–æ–º–µ—Ä —Ç–æ—á–∫–∏
    frame,                  # –°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
    command,                # MAV_CMD_NAV_WAYPOINT
    current,                # 0=–Ω–µ —Ç–µ–∫—É—â–∞—è, 1=—Ç–µ–∫—É—â–∞—è
    autocontinue,           # 1=–∞–≤—Ç–æ –∫ —Å–ª–µ–¥—É—é—â–µ–π
    param1, param2, param3, param4,  # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥—ã
    x,                      # –®–∏—Ä–æ—Ç–∞ * 1e7
    y,                      # –î–æ–ª–≥–æ—Ç–∞ * 1e7
    z                       # –í—ã—Å–æ—Ç–∞
)
```

#### üè† –ú–µ—Ç–∞—Ñ–æ—Ä–∞: GPS –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤ –º–∞—à–∏–Ω–µ

**–ú–∏—Å—Å–∏—è –¥—Ä–æ–Ω–∞ = –º–∞—Ä—à—Ä—É—Ç –≤ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–µ:**

**GPS –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä –≤ –∞–≤—Ç–æ:**
```
1. –í—ã –≤–≤–æ–¥–∏—Ç–µ: –î–æ–º ‚Üí –†–∞–±–æ—Ç–∞
2. –ù–∞–≤–∏–≥–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç —Ç–æ—á–∫–∏:
   - –¢–æ—á–∫–∞ 1: –í—ã–µ–∑–¥ —Å —É–ª–∏—Ü—ã
   - –¢–æ—á–∫–∞ 2: –ü–æ–≤–æ—Ä–æ—Ç –Ω–∞ —à–æ—Å—Å–µ
   - –¢–æ—á–∫–∞ 3: –°—ä–µ–∑–¥
   - –¢–æ—á–∫–∞ 4: –ü–∞—Ä–∫–æ–≤–∫–∞
3. –í—ã —Å–ª–µ–¥—É–µ—Ç–µ —Ç–æ—á–∫–∞–º
4. –ù–∞–≤–∏–≥–∞—Ç–æ—Ä: "–í—ã –ø—Ä–∏–±—ã–ª–∏!"
```

**–ú–∏—Å—Å–∏—è –¥—Ä–æ–Ω–∞:**
```
1. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: –î–æ–º ‚Üí –ü–∞—Ç—Ä—É–ª—å ‚Üí –î–æ–º
2. –î—Ä–æ–Ω –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ—á–∫–∏:
   - –¢–æ—á–∫–∞ 0: –í–∑–ª—ë—Ç 15–º
   - –¢–æ—á–∫–∞ 1: –õ–µ—Ç–µ—Ç—å (37.7750, -122.4194)
   - –¢–æ—á–∫–∞ 2: –õ–µ—Ç–µ—Ç—å (37.7750, -122.4184)
   - –¢–æ—á–∫–∞ 3: –í–µ—Ä–Ω—É—Ç—å—Å—è –¥–æ–º–æ–π
3. –î—Ä–æ–Ω —Å–ª–µ–¥—É–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ
4. –î—Ä–æ–Ω: "–ú–∏—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
```

**LILITH:** *"–†–∞–∑–Ω–∏—Ü–∞? GPS –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä –Ω–µ —É–±—å—ë—Ç –≤–∞—Å –µ—Å–ª–∏ –æ—à–∏–±—ë—Ç—Å—è. –î—Ä–æ–Ω ‚Äî –º–æ–∂–µ—Ç. –ü–æ—ç—Ç–æ–º—É –∫–∞–∂–¥–∞—è —Ç–æ—á–∫–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –≤—ã—Å–æ—Ç–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞, geofence –∞–∫—Ç–∏–≤–µ–Ω. Autonomy = –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å √ó 1000."*

#### –ü—Ä–æ—Ç–æ–∫–æ–ª –∑–∞–≥—Ä—É–∑–∫–∏ –º–∏—Å—Å–∏–∏

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
```
1. GCS –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç MISSION_COUNT (–≤—Å–µ–≥–æ —Ç–æ—á–µ–∫)
2. –î—Ä–æ–Ω –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç MISSION_REQUEST (seq 0)
3. GCS –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç MISSION_ITEM_INT (seq 0)
4. –î—Ä–æ–Ω –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç MISSION_REQUEST (seq 1)
5. ... –ø–æ–≤—Ç–æ—Ä –¥–ª—è –≤—Å–µ—Ö —Ç–æ—á–µ–∫
6. –î—Ä–æ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç MISSION_ACK (—É—Å–ø–µ—Ö/–ø—Ä–æ–≤–∞–ª)
```

**–ü–æ—á–µ–º—É —Ç–∞–∫–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª?**

<details>
<summary>üí° "Aha!" –º–æ–º–µ–Ω—Ç: –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏</summary>

**–ü–æ—á–µ–º—É –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å—ë —Å—Ä–∞–∑—É?**

**–ü–ª–æ—Ö–æ–π –≤–∞—Ä–∏–∞–Ω—Ç (–≤—Å—ë —Å—Ä–∞–∑—É):**
```
GCS –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ 100 —Ç–æ—á–µ–∫
‚Üí 4000 –±–∞–π—Ç –¥–∞–Ω–Ω—ã—Ö
‚Üí –ù–∞ 433–ú–ì—Ü —Ä–∞–¥–∏–æ (19.2 –∫–±–∏—Ç/—Å–µ–∫)
‚Üí 1.7 —Å–µ–∫—É–Ω–¥—ã –ø–µ—Ä–µ–¥–∞—á–∏
‚Üí –û–¥–∏–Ω –ø–∞–∫–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω = –≤—Å—è –º–∏—Å—Å–∏—è —Å–ª–æ–º–∞–Ω–∞!
```

**–•–æ—Ä–æ—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç (–ø–æ –æ–¥–Ω–æ–π):**
```
GCS: "–£ –º–µ–Ω—è 100 —Ç–æ—á–µ–∫"
–î—Ä–æ–Ω: "–î–∞–π —Ç–æ—á–∫—É 0"
GCS: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ—á–∫—É 0
–î—Ä–æ–Ω: "–ü–æ–ª—É—á–∏–ª! –î–∞–π —Ç–æ—á–∫—É 1"
...

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
‚úÖ –ü–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–∞ = –ø–æ–≤—Ç–æ—Ä –æ–¥–Ω–æ–π —Ç–æ—á–∫–∏
‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∂–¥—É—é —Ç–æ—á–∫—É
‚úÖ –î—Ä–æ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —Ç–µ–º–ø –ø—Ä–∏—ë–º–∞
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞—Ö
```

**–ê–Ω–∞–ª–æ–≥–∏—è:**
```
–ü–ª–æ—Ö–æ: –ö–∏–Ω—É—Ç—å —Å—Ä–∞–∑—É 100 –∫–∏—Ä–ø–∏—á–µ–π —Å—Ç—Ä–æ–∏—Ç–µ–ª—é
      ‚Üí –£—Ä–æ–Ω–∏—Ç, —Å–ª–æ–º–∞–µ—Ç

–•–æ—Ä–æ—à–æ: –î–∞–≤–∞—Ç—å –ø–æ –æ–¥–Ω–æ–º—É –∫–∏—Ä–ø–∏—á—É
       ‚Üí –ö–ª–∞–¥—ë—Ç, –ø—Ä–æ—Å–∏—Ç —Å–ª–µ–¥—É—é—â–∏–π
       ‚Üí –ù–∞–¥—ë–∂–Ω–æ, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ
```

</details>

#### –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –º–∏—Å—Å–∏–∏

**–§–æ—Ä–º–∞—Ç QGC WPL 110:**
```
QGC WPL 110
0  1  0  16  0  0  0  0  lat  lon  alt  1    # –î–æ–º
1  0  3  22  0  0  0  0  lat  lon  alt  1    # –í–∑–ª—ë—Ç
2  0  3  16  0  0  0  0  lat  lon  alt  1    # –¢–æ—á–∫–∞
...
```

**–ü–æ–ª—è:**
```
seq current frame command p1 p2 p3 p4 lat lon alt autocontinue
```

---

### üíª –ü—Ä–∞–∫—Ç–∏–∫–∞: –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è –º–∏—Å—Å–∏—è

**–ó–∞–¥–∞–Ω–∏–µ:**

1. **–ò–∑—É—á–∏—Ç—å –ø—Ä–∏–º–µ—Ä –º–∏—Å—Å–∏–∏:**
```bash
cd ~/kernel-shadows/season-6-embedded-iot/episode-22-drones/artifacts/mission-plans

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–≤–∞–¥—Ä–∞—Ç–Ω—É—é –º–∏—Å—Å–∏—é
cat simple_square.waypoints
```

2. **–ó–∞–≤–µ—Ä—à–∏—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –∫–æ–¥:**
```bash
cd ~/kernel-shadows/season-6-embedded-iot/episode-22-drones/starter/python

nano autonomous_mission.py
```

3. **–ó–∞–≥—Ä—É–∑–∏—Ç—å –º–∏—Å—Å–∏—é:**
```python
def upload_mission(self, waypoints):
    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
    self.master.mav.mission_count_send(
        self.master.target_system,
        self.master.target_component,
        len(waypoints) + 1,  # +1 –¥–ª—è –¥–æ–º/–≤–∑–ª—ë—Ç
        0
    )
    
    # –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–∂–¥—É—é —Ç–æ—á–∫—É
    for i, (lat, lon, alt) in enumerate(waypoints):
        # –ñ–¥–∞—Ç—å –∑–∞–ø—Ä–æ—Å
        msg = self.master.recv_match(type='MISSION_REQUEST', ...)
        
        # –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–æ—á–∫—É
        self.master.mav.mission_item_int_send(...)
```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω—É—é –º–∏—Å—Å–∏—é:**
```bash
python3 autonomous_mission.py
```

**–í—ã–≤–æ–¥:**
```
=== –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è –º–∏—Å—Å–∏—è –Ω–∞–±–ª—é–¥–µ–Ω–∏—è ===
–ú–∏—Å—Å–∏—è: –ö–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
–¢–æ—á–µ–∫: 5

–ó–∞–≥—Ä—É–∑–∫–∞ –º–∏—Å—Å–∏–∏: 5 —Ç–æ—á–µ–∫
  –¢–æ—á–∫–∞ 1: 37.7750, -122.4194, 15–º
  –¢–æ—á–∫–∞ 2: 37.7750, -122.4184, 15–º
  ...
‚úì –ú–∏—Å—Å–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ

–ù–∞–∂–º–∏—Ç–µ ENTER –¥–ª—è –Ω–∞—á–∞–ª–∞ –º–∏—Å—Å–∏–∏ (—É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ ARMED!)...

–ó–∞–ø—É—Å–∫ –º–∏—Å—Å–∏–∏ (—Ä–µ–∂–∏–º AUTO)...
‚úì –ú–∏—Å—Å–∏—è –∑–∞–ø—É—â–µ–Ω–∞

=== –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–∏—Å—Å–∏–∏ ===
–¢–æ—á–∫–∞ 1
  –í—ã—Å–æ—Ç–∞: 15.2–º
–¢–æ—á–∫–∞ 2
  –í—ã—Å–æ—Ç–∞: 15.0–º
...
‚úì –ú–∏—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
```

---

## üîÑ –¶–∏–∫–ª 4: –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (35 –º–∏–Ω)

### üé¨ –°—é–∂–µ—Ç

**Li Wei —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –ø–∞–Ω–µ–ª—å —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏:**

```
GPS: 37.7749, -122.4194 (12 —Å–ø—É—Ç–Ω–∏–∫–æ–≤, HDOP 0.8)
–í—ã—Å–æ—Ç–∞: 15.3–º AGL
–ë–∞—Ç–∞—Ä–µ—è: 15.8–í, 8.2–ê, –æ—Å—Ç–∞–ª–æ—Å—å 78%
–°–∫–æ—Ä–æ—Å—Ç—å: 3.5 –º/—Å
–†–µ–∂–∏–º: AUTO
```

**Li Wei:** *"–¢–µ–ª–µ–º–µ—Ç—Ä–∏—è ‚Äî —ç—Ç–æ –≥–ª–∞–∑–∞ –≤ –Ω–µ–±–µ. GPS –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏. –ë–∞—Ç–∞—Ä–µ—è –∫—Ä–∏—Ç–∏—á–Ω–∞ ‚Äî –Ω–∏–∑–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ = RTL. –í—ã—Å–æ—Ç–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –°–∫–æ—Ä–æ—Å—Ç—å –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. –í—Å—ë –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—Å—è —Ä–µ–∞–ª-—Ç–∞–π–º."*

### üìö –¢–µ–æ—Ä–∏—è: –ü–æ—Ç–æ–∫–∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏

#### –ö–ª—é—á–µ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏

**GPS (GLOBAL_POSITION_INT):**
```python
lat = msg.lat / 1e7          # –≥—Ä–∞–¥—É—Å—ã
lon = msg.lon / 1e7
alt = msg.alt / 1000         # –º–º –≤ –º (MSL)
relative_alt = msg.relative_alt / 1000  # AGL (–Ω–∞–¥ –∑–µ–º–ª—ë–π)
```

**–ë–∞—Ç–∞—Ä–µ—è (SYS_STATUS):**
```python
voltage = msg.voltage_battery / 1000  # –º–í –≤ –í
current = msg.current_battery / 100   # —Å–ê –≤ –ê
remaining = msg.battery_remaining     # %
```

**–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è (ATTITUDE):**
```python
roll = msg.roll * 57.3   # —Ä–∞–¥ –≤ –≥—Ä–∞–¥—É—Å—ã
pitch = msg.pitch * 57.3
yaw = msg.yaw * 57.3
```

**VFR_HUD (—Å–∫–æ—Ä–æ—Å—Ç–∏):**
```python
airspeed = msg.airspeed  # –º/—Å
groundspeed = msg.groundspeed
heading = msg.heading    # –≥—Ä–∞–¥—É—Å—ã
throttle = msg.throttle  # %
```

**üí° "Aha!" –º–æ–º–µ–Ω—Ç: –ü–æ—á–µ–º—É —É–º–Ω–æ–∂–∞–µ–º –Ω–∞ 57.3?**

<details>
<summary>–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ —Ä–∞–¥–∏–∞–Ω ‚Üí –≥—Ä–∞–¥—É—Å—ã</summary>

**MAVLink –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≥–ª—ã –≤ —Ä–∞–¥–∏–∞–Ω–∞—Ö, –Ω–∞–º –Ω—É–∂–Ω—ã –≥—Ä–∞–¥—É—Å—ã!**

**–ö–æ–Ω–≤–µ—Ä—Å–∏—è:**
```
1 –ø–æ–ª–Ω—ã–π –∫—Ä—É–≥ = 360¬∞ = 2œÄ —Ä–∞–¥–∏–∞–Ω
1 —Ä–∞–¥–∏–∞–Ω = 360¬∞ / (2œÄ) = 57.2957795...¬∞

–û–∫—Ä—É–≥–ª—è–µ–º –¥–æ 57.3
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```python
# –î—Ä–æ–Ω –Ω–∞–∫–ª–æ–Ω—ë–Ω –Ω–∞ œÄ/6 —Ä–∞–¥–∏–∞–Ω (roll)
roll_rad = 0.524  # œÄ/6 ‚âà 0.524
roll_deg = 0.524 * 57.3 = 30¬∞

# –î—Ä–æ–Ω —Ä–∞–∑–≤–µ—Ä–Ω—É–ª—Å—è –Ω–∞ œÄ —Ä–∞–¥–∏–∞–Ω (yaw)
yaw_rad = 3.14  # œÄ
yaw_deg = 3.14 * 57.3 = 180¬∞
```

**–ü–æ—á–µ–º—É —Ä–∞–¥–∏–∞–Ω—ã –≤ MAVLink?**
```
–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞: —Ä–∞–¥–∏–∞–Ω—ã –ø—Ä–æ—â–µ –¥–ª—è —Ä–∞—Å—á—ë—Ç–æ–≤
  sin(x), cos(x) —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ä–∞–¥–∏–∞–Ω–∞–º–∏
  
–õ—é–¥–∏: –≥—Ä–∞–¥—É—Å—ã –ø–æ–Ω—è—Ç–Ω–µ–µ
  "30¬∞ –Ω–∞–∫–ª–æ–Ω" vs "0.524 —Ä–∞–¥–∏–∞–Ω"
  
MAVLink: —Ä–∞–¥–∏–∞–Ω—ã –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
–í–∞—à –∫–æ–¥: –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ –≥—Ä–∞–¥—É—Å—ã –¥–ª—è –ø–æ–∫–∞–∑–∞
```

</details>

#### –ó–∞–ø—Ä–æ—Å—ã –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

```python
# –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—Å–µ –ø–æ—Ç–æ–∫–∏ –Ω–∞ 4–ì—Ü
master.mav.request_data_stream_send(
    master.target_system,
    master.target_component,
    mavutil.mavlink.MAV_DATA_STREAM_ALL,
    4,  # –ì—Ü
    1   # —Å—Ç–∞—Ä—Ç
)

# –ò–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ—Ç–æ–∫–∏
MAV_DATA_STREAM_POSITION    # GPS
MAV_DATA_STREAM_EXTRA1      # –û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è
MAV_DATA_STREAM_RAW_SENSORS # IMU
```

---

### üíª –ü—Ä–∞–∫—Ç–∏–∫–∞: –õ–æ–≥–≥–µ—Ä —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏

**–°–æ–∑–¥–∞–π—Ç–µ –ª–æ–≥–≥–µ—Ä —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏:**

```python
#!/usr/bin/env python3
import time
import json
from pymavlink import mavutil

master = mavutil.mavlink_connection('udp:127.0.0.1:14550')
master.wait_heartbeat()

# –ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ—Ç–æ–∫–∏
master.mav.request_data_stream_send(
    master.target_system,
    master.target_component,
    mavutil.mavlink.MAV_DATA_STREAM_ALL,
    4, 1
)

# –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é
log_file = open('telemetry.log', 'w')

try:
    while True:
        # GPS
        gps = master.recv_match(type='GLOBAL_POSITION_INT', blocking=True, timeout=1)
        
        # –ë–∞—Ç–∞—Ä–µ—è
        bat = master.recv_match(type='SYS_STATUS', blocking=True, timeout=1)
        
        if gps and bat:
            data = {
                'time': time.time(),
                'lat': gps.lat / 1e7,
                'lon': gps.lon / 1e7,
                'alt': gps.relative_alt / 1000,
                'voltage': bat.voltage_battery / 1000,
                'remaining': bat.battery_remaining
            }
            log_file.write(json.dumps(data) + '\n')
            print(f"–ó–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–æ: {data}")
        
        time.sleep(0.25)

except KeyboardInterrupt:
    log_file.close()
    print("\n–õ–æ–≥ —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ telemetry.log")
```

---

## üîÑ –¶–∏–∫–ª 5: –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ (Season 5 –≤–æ–∑–≤—Ä–∞—Ç!) (40 –º–∏–Ω)

### üé¨ –°—é–∂–µ—Ç

**–ê–ª–µ–∫—Å (–≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫, –æ–±–µ—Å–ø–æ–∫–æ–µ–Ω–Ω—ã–π):**

*"Li Wei, –ö—Ä—ã–ª–æ–≤ –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥—Ä–æ–Ω—É. –°–Ω–∏—Ñ–∏–Ω–≥ UART. RF –ø–µ—Ä–µ—Ö–≤–∞—Ç. –ï—Å–ª–∏ –æ–Ω –ø–æ–ª—É—á–∏—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Äî –¥—Ä–æ–Ω –ª–µ—Ç–∏—Ç –∫ –Ω–µ–º—É."*

**Li Wei:** *"–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ Season 5 Episode 20. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ AES-256. –ö–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∞. –ó–∞—â–∏—Ç–∞ –æ—Ç replay —á–µ—Ä–µ–∑ timestamp. –ö—Ä—ã–ª–æ–≤ –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ ciphertext. –ë–µ—Å–ø–æ–ª–µ–∑–Ω–æ."*

### üìö –¢–µ–æ—Ä–∏—è: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥

#### –í–µ–∫—Ç–æ—Ä—ã –∞—Ç–∞–∫

**1. –°–Ω–∏—Ñ–∏–Ω–≥ UART:**
```
–ê—Ç–∞–∫—É—é—â–∏–π —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ UART –ø–∏–Ω–∞–º
–ß–∏—Ç–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã MAVLink –≤ plaintext
–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –∫–æ–º–∞–Ω–¥—ã ARM/TAKEOFF
```

**2. RF –ø–µ—Ä–µ—Ö–≤–∞—Ç:**
```
–†–∞–¥–∏–æ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ 433–ú–ì—Ü
MAVLink –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
–ê—Ç–∞–∫—É—é—â–∏–π —Å SDR –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –∏ –≤–Ω–µ–¥—Ä—è—Ç—å –∫–æ–º–∞–Ω–¥—ã
```

**3. Replay –∞—Ç–∞–∫–∏:**
```
–ó–∞–ø–∏—Å–∞—Ç—å –≤–∞–ª–∏–¥–Ω—É—é ARM –∫–æ–º–∞–Ω–¥—É
–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –ø–æ–∑–∂–µ –∫–æ–≥–¥–∞ –¥—Ä–æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å disarmed
–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—ë—Ç
```

#### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ AES-256-GCM

**–ü–æ—á–µ–º—É AES-GCM:**
- AES-256: –°–∏–ª—å–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- GCM: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (—Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å + –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å)
- Nonce: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç replay
- –ë—ã—Å—Ç—Ä–æ: –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–µ–∞–ª-—Ç–∞–π–º

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
from cryptography.hazmat.primitives.ciphers.aead import AESGCM
import os
import time

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á (256-–±–∏—Ç)
key = AESGCM.generate_key(bit_length=256)
cipher = AESGCM(key)

# –ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É
def encrypt_command(cmd):
    nonce = os.urandom(12)  # 96-–±–∏—Ç nonce
    timestamp = str(int(time.time())).encode()
    plaintext = cmd + b':' + timestamp
    ciphertext = cipher.encrypt(nonce, plaintext, None)
    return nonce + ciphertext

# –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
def decrypt_command(encrypted):
    nonce = encrypted[:12]
    ciphertext = encrypted[12:]
    plaintext = cipher.decrypt(nonce, ciphertext, None)
    
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å timestamp (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å replay)
    cmd, timestamp = plaintext.rsplit(b':', 1)
    age = time.time() - int(timestamp)
    if age > 5:  # –ö–æ–º–∞–Ω–¥–∞ —Å—Ç–∞—Ä—à–µ 5 —Å–µ–∫ = –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞
        raise ValueError("–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ replay –∞—Ç–∞–∫–∞")
    
    return cmd
```

---

### üíª –ü—Ä–∞–∫—Ç–∏–∫–∞: –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

**–¢–µ—Å—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è:**
```bash
cd ~/kernel-shadows/season-6-embedded-iot/episode-22-drones/solution/python

python3 encrypted_commands.py
```

**–í—ã–≤–æ–¥:**
```
=== –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥—Ä–æ–Ω–∞ ===

–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ: AES-256-GCM
–ö–ª—é—á (hex): a7f3c9e2b1d4...

‚úì –ü–æ–¥–∫–ª—é—á–µ–Ω–æ —Å –≤–∫–ª—é—á—ë–Ω–Ω—ã–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º
–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ (60 –±–∞–π—Ç)
–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ: b'ARM:1:1729123456'
‚úì ARM –∫–æ–º–∞–Ω–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª)

‚úì –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
  - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞—Ö–≤–∞—Ç –∫–æ–º–∞–Ω–¥
  - –ü–µ—Ä–µ—Ö–≤–∞—Ç UART/RF –∑–∞—â–∏—â—ë–Ω
  - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ replay –∞—Ç–∞–∫ (timestamp)
```

---

## üîÑ –¶–∏–∫–ª 6: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞–≤–∞—Ä–∏–π–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã (30 –º–∏–Ω)

### üé¨ –°—é–∂–µ—Ç ‚Äî –î–µ–Ω—å 44, –ø–æ–ª–µ–≤–æ–π —Ç–µ—Å—Ç

**Li Wei –∏ –ú–∞–∫—Å –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–æ–º –ø–æ–ª–µ. –†–µ–∞–ª—å–Ω—ã–π –¥—Ä–æ–Ω. –ü—Ä–æ–ø–µ–ª–ª–µ—Ä—ã –í–ö–õ–Æ–ß–ï–ù–´.**

**Li Wei:** *"–ü—Ä–æ—Ü–µ–¥—É—Ä—ã failsafe. –ë–∞—Ç–∞—Ä–µ—è –Ω–∏–∑–∫–∞—è ‚Äî RTL. –ü–æ—Ç–µ—Ä—è GPS ‚Äî LAND. –ü–æ—Ç–µ—Ä—è RC ‚Äî RTL. –ü–æ—Ç–µ—Ä—è GCS ‚Äî RTL. –í—Å–µ–≥–¥–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫–∞–∑."*

–î—Ä–æ–Ω –≤ –≤–æ–∑–¥—É—Ö–µ. Li Wei –æ—Ç–∫–ª—é—á–∞–µ—Ç RC –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫.

**–î—Ä–æ–Ω –∞–≤—Ç–æ–Ω–æ–º–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç RTL. –õ–µ—Ç–∏—Ç –¥–æ–º–æ–π. –°–∞–¥–∏—Ç—Å—è. –ò–¥–µ–∞–ª—å–Ω–æ.**

**Li Wei:** *"Failsafe —Ä–∞–±–æ—Ç–∞–µ—Ç. –ù–æ —Ä—É—á–Ω–∞—è –∞–≤–∞—Ä–∏—è ‚Äî –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤. –ö–Ω–æ–ø–∫–∞ DISARM. Kill switch. –ê–≤–∞—Ä–∏–π–Ω–∞—è –ø–æ—Å–∞–¥–∫–∞. –ü—Ä–∞–∫—Ç–∏–∫–∞ –¥–æ –º—ã—à–µ—á–Ω–æ–π –ø–∞–º—è—Ç–∏."*

### üìö –¢–µ–æ—Ä–∏—è: –°–∏—Å—Ç–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Failsafe

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ failsafe:**
```
FS_BATT_ENABLE=1     # Failsafe –±–∞—Ç–∞—Ä–µ–∏
FS_BATT_VOLTAGE=14.0 # –ù–∏–∑–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ (RTL)
FS_GCS_ENABLE=1      # –ü–æ—Ç–µ—Ä—è GCS (RTL)
FS_THR_ENABLE=1      # –ü–æ—Ç–µ—Ä—è –≥–∞–∑–∞ (LAND)
FENCE_ENABLE=1       # Geofence (RTL –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏)
```

#### –ê–≤–∞—Ä–∏–π–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

**1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –±–∞—Ç–∞—Ä–µ—è:**
```python
if battery_voltage < 13.5:  # –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è (4S)
    master.set_mode('RTL')  # –í–æ–∑–≤—Ä–∞—Ç –¥–æ–º–æ–π
    # –∏–ª–∏
    master.set_mode('LAND') # –ê–≤–∞—Ä–∏–π–Ω–∞—è –ø–æ—Å–∞–¥–∫–∞
```

**2. –ü–æ—Ç–µ—Ä—è GPS:**
```python
if gps_sats < 6:
    if altitude > 5:
        master.set_mode('LAND')  # –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π —Å–ø—É—Å–∫
    # –ù–ï –ø—ã—Ç–∞—Ç—å—Å—è –¥–µ—Ä–∂–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –±–µ–∑ GPS!
```

**3. –ù–∞—Ä—É—à–µ–Ω–∏–µ Geofence:**
```python
if distance_from_home > 500:  # –º–µ—Ç—Ä—ã
    master.set_mode('RTL')
    log_warning("–ù–∞—Ä—É—à–µ–Ω–∏–µ geofence!")
```

**4. –†—É—á–Ω–æ–π –∞–≤–∞—Ä–∏–π–Ω—ã–π DISARM:**
```python
# –¢–û–õ–¨–ö–û –Ω–∞ –∑–µ–º–ª–µ –∏–ª–∏ –æ—Ç—á–∞—è–Ω–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è!
master.mav.command_long_send(
    ...,
    mavutil.mavlink.MAV_CMD_COMPONENT_ARM_DISARM,
    0, 0, 21196, ...  # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π disarm
)
```

---

### üíª –ü—Ä–∞–∫—Ç–∏–∫–∞: –ü—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–ø–æ–ª—ë—Ç–Ω—É—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
```python
def comprehensive_safety_check():
    checks = []
    
    # GPS
    gps = get_gps()
    if gps['sats'] >= 8 and gps['hdop'] < 2.0:
        checks.append(('GPS', True))
    else:
        checks.append(('GPS', False))
    
    # –ë–∞—Ç–∞—Ä–µ—è
    bat = get_battery()
    if bat['voltage'] >= 15.6 and bat['remaining'] >= 80:
        checks.append(('–ë–∞—Ç–∞—Ä–µ—è', True))
    else:
        checks.append(('–ë–∞—Ç–∞—Ä–µ—è', False))
    
    # Geofence
    if check_geofence_active():
        checks.append(('Geofence', True))
    else:
        checks.append(('Geofence', False))
    
    # –û—Ç—á—ë—Ç
    for name, status in checks:
        print(f"{'‚úì' if status else '‚úó'} {name}")
    
    return all(status for _, status in checks)
```

---

## üéØ –§–∏–Ω–∞–ª—å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ

### –°—é–∂–µ—Ç ‚Äî –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –º–∏—Å—Å–∏–∏

**–í–∏–∫—Ç–æ—Ä:** *"–î—Ä–æ–Ω –≥–æ—Ç–æ–≤?"*

**–ú–∞–∫—Å:** *"–î–∞. –ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ. –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã. –ü—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. Failsafe –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –í—Å—ë –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ SITL."*

**Li Wei:** *"–ü–æ–ª–µ–≤–æ–π —Ç–µ—Å—Ç –∑–∞–≤—Ç—Ä–∞. –†–µ–∞–ª—å–Ω—ã–π –ø–æ–ª—ë—Ç. –°–µ—Ç–∫–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –Ω–∞–¥ –∑–æ–Ω–æ–π –∏–Ω—Ç–µ—Ä–µ—Å–∞. –ï—Å–ª–∏ –≤—Å—ë –û–ö ‚Äî –≤ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—é."*

---

### –î–µ–Ω—å 44, –≤–µ—á–µ—Ä ‚Äî –ü–æ–ª–µ–≤–æ–π —Ç–µ—Å—Ç

–û—Ç–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ. GPS —Ñ–∏–∫—Å–∞—Ü–∏—è. –ë–∞—Ç–∞—Ä–µ—è 100%. Geofence –∞–∫—Ç–∏–≤–µ–Ω.

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
1. –ü—Ä–µ–¥–ø–æ–ª—ë—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏: ‚úì –í—Å–µ –ø—Ä–æ–π–¥–µ–Ω—ã
2. ARM: ‚úì –£—Å–ø–µ—à–Ω–æ
3. TAKEOFF 15–º: ‚úì –ù–∞–±–æ—Ä –≤—ã—Å–æ—Ç—ã
4. AUTO –º–∏—Å—Å–∏—è —Å—Ç–∞—Ä—Ç: ‚úì –¢–æ—á–∫–∞ 1/5
5. –°–µ—Ç–∫–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è: ‚úì –ó–∞–≤–µ—Ä—à–µ–Ω–æ
6. RTL: ‚úì –í–æ–∑–≤—Ä–∞—Ç
7. LAND: ‚úì –ü–æ—Å–∞–¥–∫–∞
8. DISARM: ‚úì –ë–µ–∑–æ–ø–∞—Å–Ω–æ

**Li Wei:** *"–ò–¥–µ–∞–ª—å–Ω–æ. –ì–æ—Ç–æ–≤ –∫ production."*

**LILITH:** *"–û—Ç –Ω—É–ª–µ–≤–æ–≥–æ –æ–ø—ã—Ç–∞ —Å –¥—Ä–æ–Ω–∞–º–∏ –∫ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–º—É –Ω–∞–±–ª—é–¥–µ–Ω–∏—é –∑–∞ 6 —á–∞—Å–æ–≤. MAVLink, Python —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –º–∏—Å—Å–∏–∏, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å. –í–ø–µ—á–∞—Ç–ª—è–µ—Ç. –ù–æ –ø–æ–º–Ω–∏: –∫–∞–∂–¥—ã–π –ø–æ–ª—ë—Ç = —Ä–∏—Å–∫–∏. –¢–µ—Å—Ç–∏—Ä—É–π, –ø—Ä–æ–≤–µ—Ä—è–π –¥–≤–∞–∂–¥—ã, –ø—Ä–æ–≤–µ—Ä—è–π —Ç—Ä–∏–∂–¥—ã. –î—Ä–æ–Ω –ø–∞–¥–∞–µ—Ç ‚Äî –¥–µ–Ω—å–≥–∏ –ø–æ—Ç–µ—Ä—è–Ω—ã. –î—Ä–æ–Ω —É–¥–∞—Ä—è–µ—Ç —á–µ–ª–æ–≤–µ–∫–∞ ‚Äî –∂–∏–∑–Ω–∏ –ø–æ–¥ —É–≥—Ä–æ–∑–æ–π. –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å."*

---

### –ò—Ç–æ–≥–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**

- [ ] **–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ MAVLink —Ä–∞–±–æ—Ç–∞–µ—Ç**
  ```python
  python3 drone_control.py
  # –î–æ–ª–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ SITL
  ```

- [ ] **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å ARM/DISARM/TAKEOFF/LAND**
  ```python
  # –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
  # –î—Ä–æ–Ω –¥–æ—Å—Ç–∏–≥–∞–µ—Ç —Ü–µ–ª–µ–≤–æ–π –≤—ã—Å–æ—Ç—ã
  # –°–∞–¥–∏—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ
  ```

- [ ] **–ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è –º–∏—Å—Å–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞**
  ```python
  python3 autonomous_mission.py
  # –ú–∏—Å—Å–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
  # –†–µ–∂–∏–º AUTO –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
  # –¢–æ—á–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
  ```

- [ ] **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏**
  ```python
  # GPS, –±–∞—Ç–∞—Ä–µ—è, –≤—ã—Å–æ—Ç–∞ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
  # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∞–ª-—Ç–∞–π–º
  ```

- [ ] **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
  ```python
  # –ü—Ä–µ–¥–ø–æ–ª—ë—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
  # Failsafe –Ω–∞—Å—Ç—Ä–æ–µ–Ω
  # –ê–≤–∞—Ä–∏–π–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –ø–æ–Ω—è—Ç–Ω—ã
  ```

**–ë–æ–Ω—É—Å:**
- [ ] –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ (AES-256-GCM)
- [ ] –ñ–∏–≤–∞—è –≤–∏–¥–µ–æ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è
- [ ] –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –º–∏—Å—Å–∏—è (–ø–æ–∏—Å–∫ –ø–æ —Å–µ—Ç–∫–µ)
- [ ] –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥—Ä–æ–Ω–æ–≤

---

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

**–ú–∏–Ω–∏–º—É–º (Pass):**
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ SITL —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –†—É—á–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å ARM/TAKEOFF/LAND
- ‚úÖ –ß—Ç–µ–Ω–∏–µ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ò–¥–µ–∞–ª—å–Ω–æ (Excellence):**
- ‚úÖ –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è –º–∏—Å—Å–∏—è
- ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥
- ‚úÖ –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –ü—Ä–∞–∫—Ç–∏–∫–∞ –∞–≤–∞—Ä–∏–π–Ω—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä
- ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤—ã–π –∫ –ø–æ–ª—é

---

## üß™ –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã

```bash
cd ~/kernel-shadows/season-6-embedded-iot/episode-22-drones
./tests/test.sh
```

–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—Ç:
- –°—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–æ–≤
- –°–∏–Ω—Ç–∞–∫—Å–∏—Å Python
- –ö–∞—á–µ—Å—Ç–≤–æ MAVLink –∫–æ–¥–∞
- –§—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ü–æ–ª–Ω–æ—Ç—É —Ä–µ—à–µ–Ω–∏—è

---

## üìö –†–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **MAVLink:** https://mavlink.io/en/
- **ArduPilot:** https://ardupilot.org/
- **pymavlink:** https://github.com/ArduPilot/pymavlink

### –°–∏–º—É–ª—è—Ç–æ—Ä—ã
- **SITL:** https://ardupilot.org/dev/docs/sitl-simulator-software-in-the-loop.html
- **Gazebo:** http://gazebosim.org/

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ö–æ–¥–µ–∫—Å –ø–æ–≤–µ–¥–µ–Ω–∏—è –¥—Ä–æ–Ω–æ–≤:** https://www.droneresponsible.org/

---

## üéì –ò—Ç–æ–≥–∏ Episode 22

### –ß—Ç–æ –∏–∑—É—á–∏–ª–∏

**–ü—Ä–æ—Ç–æ–∫–æ–ª MAVLink:**
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- ‚úÖ –¢–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π (–∫–æ–º–∞–Ω–¥—ã, —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è, –º–∏—Å—Å–∏—è)
- ‚úÖ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ pymavlink
- ‚úÖ –¢–∏–ø—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (Serial, UDP, TCP)

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—Ä–æ–Ω–æ–º:**
- ‚úÖ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ARM/DISARM
- ‚úÖ –†–µ–∂–∏–º—ã –ø–æ–ª—ë—Ç–∞ (GUIDED, AUTO, RTL, LAND)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è TAKEOFF/LAND
- ‚úÖ –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è —Ä–µ–∞–ª-—Ç–∞–π–º (GPS, –±–∞—Ç–∞—Ä–µ—è, –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è)

**–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –ø–æ–ª—ë—Ç:**
- ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏—Å—Å–∏–∏ (—Ç–æ—á–∫–∏)
- ‚úÖ –ü—Ä–æ—Ç–æ–∫–æ–ª –∑–∞–≥—Ä—É–∑–∫–∏ –º–∏—Å—Å–∏–∏
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ AUTO
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–∏—Å—Å–∏–∏

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (Season 5!):**
- ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ (AES-256-GCM)
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ replay –∞—Ç–∞–∫
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ UART/RF

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ–ª—ë—Ç–æ–≤:**
- ‚úÖ –ü—Ä–µ–¥–ø–æ–ª—ë—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Failsafe
- ‚úÖ –ê–≤–∞—Ä–∏–π–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ Geofence

---

## üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ

**–ü–∏–ª–æ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ –¥—Ä–æ–Ω–∞! üöÅ**

**–ú–∞–∫—Å —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç:**
- –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—Ä–æ–Ω–æ–º (MAVLink + Python)
- –í—ã–ø–æ–ª–Ω—è—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–µ –º–∏—Å—Å–∏–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
- –†–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥
- –°–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å –∞–≤–∞—Ä–∏–π–Ω—ã–º–∏ —Å–∏—Ç—É–∞—Ü–∏—è–º–∏
- –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –∫ production –ë–ü–õ–ê —Å–∏—Å—Ç–µ–º—ã

**Li Wei:** *"Episode 22 ‚Äî —Ö–∞—Ä–¥–∫–æ—Ä. MAVLink, Python, –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –ø–æ–ª—ë—Ç, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ. –î–ª—è –º–Ω–æ–≥–∏—Ö —ç—Ç–æ –º–µ—Å—è—Ü—ã –æ–±—É—á–µ–Ω–∏—è. –¢—ã —Å–¥–µ–ª–∞–ª –∑–∞ 6 —á–∞—Å–æ–≤. –ù–æ –ø—Ä–∞–∫—Ç–∏–∫—É–π –¥–∞–ª—å—à–µ. SITL —Å–∏–º—É–ª—è—Ç–æ—Ä ‚Äî —Ç–≤–æ–π –ª—É—á—à–∏–π –¥—Ä—É–≥. –†–µ–∞–ª—å–Ω—ã–π –¥—Ä–æ–Ω ‚Äî —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ 100% —É–≤–µ—Ä–µ–Ω."*

**–í–∏–∫—Ç–æ—Ä:** *"–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. Episode 21 ‚Äî —Å—Ç–∞—Ç–∏—á–Ω–∞—è –∫–∞–º–µ—Ä–∞. Episode 22 ‚Äî –º–æ–±–∏–ª—å–Ω—ã–π –¥—Ä–æ–Ω. Episode 23 ‚Äî —Å–µ—Ç—å IoT –¥–∞—Ç—á–∏–∫–æ–≤. Episode 24 ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —è–¥—Ä–∞. –ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ embedded Linux –±–ª–∏–∑–∫–æ."*

**LILITH:** *"–û—Ç shell —Å–∫—Ä–∏–ø—Ç–æ–≤ (Season 1) –∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é –¥—Ä–æ–Ω–æ–≤. –≠–≤–æ–ª—é—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –¢—ã —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å: –∫–æ–¥–∏—Ç—å, –≤–∑–ª–∞–º—ã–≤–∞—Ç—å, –∑–∞—â–∏—â–∞—Ç—å (Season 5), –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –¥—Ä–æ–Ω–∞–º–∏. –ú—É–ª—å—Ç–∏-–¥–æ–º–µ–Ω–Ω—ã–π –∏–Ω–∂–µ–Ω–µ—Ä. –†–µ–¥–∫–∏–π –Ω–∞–±–æ—Ä –Ω–∞–≤—ã–∫–æ–≤."*

---

**–°—Ç–∞—Ç—É—Å:** Episode 22 –ó–ê–í–ï–†–®–Å–ù ‚úÖ  
**–î–∞–ª–µ–µ:** [Episode 23: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å IoT –∏ MQTT](../episode-23-iot-mqtt/)  
**–°–µ–∑–æ–Ω:** [Season 6: Embedded Linux & IoT](../)  
**–ö—É—Ä—Å:** [KERNEL SHADOWS](../../../)

---

*"–î—Ä–æ–Ω ‚Äî —ç—Ç–æ –Ω–µ –∏–≥—Ä—É—à–∫–∞. –≠—Ç–æ –ª–µ—Ç–∞—é—â–∏–π –∫–æ–º–ø—å—é—Ç–µ—Ä. –ö–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –ª–µ—Ç–∞–π –±–µ–∑–æ–ø–∞—Å–Ω–æ."* ‚Äî Li Wei
