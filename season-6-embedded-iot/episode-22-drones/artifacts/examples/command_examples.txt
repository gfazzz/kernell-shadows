# MAVLink Command Examples - Episode 22

## ARM/DISARM
# ARM
mavutil.mavlink.MAV_CMD_COMPONENT_ARM_DISARM
param1=1  # 1=arm, 0=disarm

# Code:
master.mav.command_long_send(
    master.target_system,
    master.target_component,
    mavutil.mavlink.MAV_CMD_COMPONENT_ARM_DISARM,
    0, 1, 0, 0, 0, 0, 0, 0
)

## TAKEOFF
# AUTO takeoff to altitude
mavutil.mavlink.MAV_CMD_NAV_TAKEOFF
param7=10  # Altitude (m)

master.mav.command_long_send(
    master.target_system,
    master.target_component,
    mavutil.mavlink.MAV_CMD_NAV_TAKEOFF,
    0, 0, 0, 0, 0, 0, 0, 10
)

## SET MODE
# Change flight mode
master.set_mode('GUIDED')  # or 'AUTO', 'RTL', etc

## GOTO (GUIDED mode)
# Fly to lat/lon/alt
master.mav.send(mavutil.mavlink.MAVLink_set_position_target_global_int_message(
    10,  # time_boot_ms
    master.target_system,
    master.target_component,
    mavutil.mavlink.MAV_FRAME_GLOBAL_RELATIVE_ALT_INT,
    int(0b110111111000),  # type_mask (position only)
    int(lat * 1e7),
    int(lon * 1e7),
    alt,
    0, 0, 0,  # vx, vy, vz
    0, 0, 0,  # afx, afy, afz
    0, 0      # yaw, yaw_rate
))

## RTL
# Return to launch
master.set_mode('RTL')

## LAND
master.set_mode('LAND')

## MISSION UPLOAD
# (complex, use MAVProxy or dronekit)

## Common Params
MAV_MODE_MANUAL_DISARMED = 64
MAV_MODE_MANUAL_ARMED = 192
MAV_MODE_GUIDED_ARMED = 216
MAV_MODE_AUTO_ARMED = 220
